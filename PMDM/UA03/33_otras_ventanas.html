<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3.3. Otras ventanas | UA03. Programando... </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="David Bermúdez Alcántara" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.8.1 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<link rel="stylesheet" type="text/css" href="udl-content.css" />
<script type="text/javascript" src="udl-content.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
<body class="exe-web-site" id="exe-node-10"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">UA03. Programando...</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UA03. Programando...</a></li>
   <li><a href="31_herramientas.html" class="no-ch">3.1. Herramientas</a></li>
   <li><a href="32_interfaces_de_usuario.html" class="daddy">3.2. Interfaces de usuario</a>
   <ul class="other-section">
      <li><a href="321_activity_y_layout.html" class="no-ch">3.2.1. Activity y Layout</a></li>
      <li><a href="322_context.html" class="no-ch">3.2.2. Context</a></li>
      <li><a href="323_intent.html" class="no-ch">3.2.3. Intent</a></li>
      <li><a href="324_tareas.html" class="no-ch">3.2.4. Tareas</a></li>
      <li><a href="325_fragment.html" class="no-ch">3.2.5. Fragment</a></li>
   </ul>
   </li>
   <li id="active"><a href="33_otras_ventanas.html" class="active no-ch">3.3. Otras ventanas</a></li>
   <li><a href="34_imgenes.html" class="daddy">3.4. Imágenes</a>
   <ul class="other-section">
      <li><a href="341_drawables.html" class="no-ch">3.4.1. Drawables</a></li>
   </ul>
   </li>
   <li><a href="35_eventos_de_teclado.html" class="no-ch">3.5. Eventos de teclado</a></li>
   <li><a href="36_sonidos.html" class="no-ch">3.6. Sonidos</a></li>
   <li><a href="ejercicio_1.html" class="no-ch">Ejercicio 1</a></li>
   <li><a href="ejercicio_2.html" class="no-ch">Ejercicio 2</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="325_fragment.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="34_imgenes.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">3.3. Otras ventanas</h1></header>
<article class="iDevice_wrapper UDLcontentIdevice" id="id23">
<div class="iDevice emphasis0" >
<div id="ta23_114_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>Aparte de <strong>activities</strong> y <strong>fragments</strong>, podemos utilizar los diálogos para ventanas más sencillas. Por norma general, un <strong>diálogo</strong> no ocupará toda la pantalla, sino que mostrará un mensaje al usuario con un par de botones. Podría mostrar, además, algunos controles que faciliten al usuario la introducción de datos o la elección de alguna preferencia antes de continuar otro proceso.</p>
<p>Podríamos crear un diálogo a partir de una activity diseñando el layout pero utilizando el tema <strong>Theme.Holo.Dialog</strong> en el manifest: <strong>&lt;activity android:theme&nbsp; = "@android:style/Theme.Holo.Dialog"&gt;</strong>.</p>
<p>Entonces, la actividad se mostrará en forma de diálogo en lugar de mostrarse en pantalla completa. Sin embargo, si el diseño del layout no es muy complejo, podemos utilizar las subclases de <strong>Dialog</strong> que nos proporciona el <strong>SDK</strong>, veamos algunas:</p>
<div class="exe-fx exe-tabs">
<h2>AlertDialog</h2>
<p>Esta subclase de Dialog muestra un título y varios botones, de forma opcional. Es capaz también de mostrar una lista de elementos de los que el usuario podrá seleccionar. Veamos un ejemplo sencillo: imaginemos que necesitamos asegurarnos de que el usuario quiere borrar un elemento de nuestra app. Podemos utilizar un código como:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>AlertDialog.Builder(context)
.setTitle("Borrar elemento")
.setMessage("¿Está seguro de que desea eliminar el elemento?")
.setPositiveButton(android.R.string.yes) { dialog, which -&gt;
Log.d("Dialog", "---------------- YES ----------------")
//TODO: borrar el elemento
}
//Si utilizamos null como listener, el diálogo simplemente se cierra
.setNegativeButton(android.R.string.no, null)
.setIcon(android.R.drawable.ic_dialog_alert)
.show(</code></pre>
</div>
</div>
<p>Como vemos, la clase <strong>AlertDialog</strong> utiliza un patrón de diseño llamado <strong>Builder</strong>. El patrón de diseño Builder es un patrón creacional que consigue separar la construcción de un objeto complejo de su representación, de modo que el mismo proceso de construcción pueda ser responsable de crear diferentes representaciones. Crear el diálogo mediante un Builder es sencillo, pues se documenta a sí mismo:</p>
<ul>
<li><strong>setTitle</strong> y <strong>setMessage</strong> establecen el título y el mensaje que se mostrarán;</li>
<li><strong>setPositiveButton</strong> establece el título del botón positivo y la acción que se llevará a cabo si el usuario acepta;</li>
<li><strong>setNegativeButton</strong> establece el título y la acción si el usuario rechaza la acción;</li>
<li><strong>setIcon</strong> muestra el icono del diálogo;</li>
<li><strong>show</strong> mostrará el diálogo, que paraliza el código hasta que el usuario escoja una opción.</li>
</ul>
<p>Imaginemos ahora que requerimos al usuario que elija una opción entre varias:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>val colores = arrayOf("Rojo", "Verde", "Azul")
AlertDialog.Builder(context)
.setTitle("Elige un color")
.setItems(colores) { dialog, which -&gt;
Log.d("Dialog", "Color elegido: ${colores[which]}")
}
.create()
.show()</code></pre>
</div>
</div>
<p>Como vemos, el Builder nos facilita la creación de un diálogo diferente, pero siguiendo el mismo patrón que antes. Ahora utilizaremos <strong>setItems</strong> para establecer las opciones disponibles, recibiendo en la variable <strong>which</strong> cuál de las opciones eligió el usuario.</p>
<h2>DatePickerDialog y TimePickerDialog</h2>
<p>Estas dos subclases de Dialog han sido especialmente diseñadas para que el usuario seleccione una fecha o una hora, respectivamente. Veamos un ejemplo sencillo:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>DatePickerDialog(requireContext(),
OnDateSetListener { view, year, monthOfYear, dayOfMonth -&gt;
Log.d("Dialog", "Fecha seleccionada: $dayOfMonth/${monthOfYear+1}/$year")
}, 2022, 7, 10
)
.show()</code></pre>
</div>
</div>
<p>De esta manera, mostramos al usuario un calendario con la fecha 10/08/2022 seleccionada por defecto. Atención a los meses, pues muchas funciones del SDK consideran enero como el mes 0, por lo tanto, el 7 será agosto. Cuando el usuario seleccione la fecha que desee, la obtendremos en las variables <strong>dayOfMonth</strong>, <strong>monthOfYear</strong> y <strong>year</strong>. Para la hora, sería algo similar:</p>
<p>TimePickerDialog(requireContext(),<br>OnTimeSetListener { view, hourOfDay, minute -&gt;<br>Log.d("Dialog", "Hora seleccionada: $hourOfDay:$minute")<br>}, 12, 5, false<br>)<br>.show()</p>
</div>
<p>Establecemos la hora que se mostrará por defecto, las 12 horas y 5 minutos; <strong>false</strong> indica que no deseamos que se muestre en formato de 24 horas.</p>
<p>Cuando el usuario seleccione la hora que quiere, recibiremos los datos en <strong>hourOfDay</strong> y <strong>minute</strong>.</p></div></div></section></div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_info" id="id24">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_info.png)"><h1 class="iDeviceTitle">Más información</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta24_115_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p><a href="https://developer.android.com/guide/topics/ui/dialogs" target="_blank" rel="noopener">https://developer.android.com/guide/topics/ui/dialogs</a></p></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="325_fragment.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="34_imgenes.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_style_js.js"></script></body></html>