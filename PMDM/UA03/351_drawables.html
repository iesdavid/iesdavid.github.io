<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3.5.1. Drawables | UA03. Programando... </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="David Bermúdez Alcántara" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.7 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<link rel="stylesheet" type="text/css" href="udl-content.css" />
<script type="text/javascript" src="udl-content.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
	</head>
<body class="exe-web-site" id="exe-node-13"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">UA03. Programando...</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UA03. Programando...</a></li>
   <li><a href="31_herramientas.html" class="no-ch">3.1. Herramientas</a></li>
   <li><a href="32_fases_de_construccin.html" class="no-ch">3.2. Fases de construcción</a></li>
   <li><a href="33_interfaces_de_usuario.html" class="daddy">3.3. Interfaces de usuario</a>
   <ul class="other-section">
      <li><a href="331_activity_y_layout.html" class="no-ch">3.3.1. Activity y Layout</a></li>
      <li><a href="332_context.html" class="no-ch">3.3.2. Context</a></li>
      <li><a href="333_intent.html" class="no-ch">3.3.3. Intent</a></li>
      <li><a href="334_tareas.html" class="no-ch">3.3.4. Tareas</a></li>
      <li><a href="335_fragment.html" class="no-ch">3.3.5. Fragment</a></li>
   </ul>
   </li>
   <li><a href="34_otras_ventanas.html" class="no-ch">3.4. Otras ventanas</a></li>
   <li class="current-page-parent"><a href="35_imgenes.html" class="current-page-parent daddy">3.5. Imágenes</a>
   <ul>
      <li id="active"><a href="351_drawables.html" class="active no-ch">3.5.1. Drawables</a></li>
   </ul>
   </li>
   <li><a href="36_eventos_de_teclado.html" class="no-ch">3.6. Eventos de teclado</a></li>
   <li><a href="37_sonidos.html" class="no-ch">3.7. Sonidos</a></li>
   <li><a href="ejercicio_1.html" class="no-ch">Ejercicio 1</a></li>
   <li><a href="ejercicio_2.html" class="no-ch">Ejercicio 2</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="35_imgenes.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="36_eventos_de_teclado.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">3.5.1. Drawables</h1></header>
<article class="iDevice_wrapper UDLcontentIdevice" id="id28">
<div class="iDevice emphasis0" >
<div id="ta28_119_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>En la carpeta de recursos <strong>"res",</strong> que los proyectos Android tienen dentro del directorio <strong>"app"</strong>, podemos encontrar la carpeta "<strong>drawable</strong>".</p>
<p>En esa carpeta, el proyecto guardará las imágenes como recursos <strong>drawables</strong> que la app utilizará en <strong>layouts</strong>, <strong>gráficos</strong>, <strong>diálogos</strong> e <strong>iconos</strong>.</p>
<p>Un recurso drawable es una abstracción del SDK para manejar imágenes que puedan ser mostradas en pantalla. Los drawables pueden cargarse mediante funciones de la API como <strong>getDrawable</strong> o ser incluidas en otros recursos <strong>XML</strong>, como layouts, con algún atributo como <strong>android:drawable</strong> o <strong>android:icon</strong>.</p>
<p>Imagina que se desea mostrar una imagen en uno de nuestros layouts. En ese caso, podemos utilizar el componente <strong>ImageView</strong>, que es un contenedor de imágenes. El código sería algo como:</p>
<div class="highlighted-code language-markup line-numbers">
<div>
<pre><code>&lt;ImageView
android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:src="@drawable/imagen" /&gt;</code></pre>
</div>
</div>
<p>Si necesitamos modificar la imagen desde el código, primero cargaríamos el recurso drawable así:</p>
<div class="highlighted-code language-java line-numbers">
<div>
<pre><code>val drawable: Drawable?= ResourcesCompat.getDrawable(resources, R.drawable.imagen, null)
...
imageView.setImageDrawable(drawable)</code></pre>
</div>
</div>
</div></div></section></div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_diary" id="id29">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_diary.png)"><h1 class="iDeviceTitle">ShapeDrawable</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta29_840_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>La clase <strong>ShapeDrawable</strong> es una subclase de <strong>Drawable</strong>, y es una buena opción cuando pretendemos dibujar un gráfico bidimensional relativamente sencillo. En el código de nuestra app, podremos codificar formas básicas, como cuadrados o círculos, utilizando las líneas y colores que deseemos. En los objetos ShapeDrawable podemos sobrescribir su método draw para personalizar el aspecto de la imagen. Veamos un&nbsp; ejemplo:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>mport android.content.Context
import android.graphics.Canvas
import android.graphics.drawable.ShapeDrawable
import android.graphics.drawable.shapes.OvalShape
import android.util.AttributeSet
import android.view.View
//Constructor que se llamará cuando la vista se llame desde código
class CustomDrawableView(context: Context) : View(context) {
constructor(context: Context, attributeSet: AttributeSet): this(context) {
//Constructor que se llamará cuando la vista se utilice en un layout
}
private val drawable: ShapeDrawable = run {
val x = 0
val y = 0
val width = 100
val height = 100
contentDescription = "Descripción de la imagen!"
ShapeDrawable(OvalShape()).apply {
// Si no establecemos el color, será negro por defecto.
paint.color = 0xff74AC23.toInt()
// Debemos establecer los límites del gráfico.
setBounds(x, y, x + width, y + height)
}
}
override fun onDraw(canvas: Canvas) {
drawable.draw(canvas)
}
}
</code></pre>
</div>
</div>
<p>Se ha creado una subclase de <strong>View</strong> con dos constructores, uno que se llamará cuando se incruste la vista en un layout y el otro para ser usado directamente en una activity o un fragment. Dentro de la clase hemos creado un ShapeDrawable con OvalShape, que dibujará un óvalo. Como el ancho y el alto son 100, será un círculo. Para personalizar nuestra vista, sobrescribimos el método onDraw de View. Aquí solo tendremos que llamar a la función draw del drawable. Veamos cómo podemos utilizar esta vista:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>class SecondFragment : Fragment() {
override fun onCreateView(
inflater: LayoutInflater, container: ViewGroup?,
savedInstanceState: Bundle?
): View? {
return CustomDrawableView(requireContext())
}</code></pre>
</div>
</div>
<p>En este caso, la vista ocupará todo el fragment, pero también podríamos utilizar la vista dentro de un layout junto con otros componentes gráficos:</p>
<div class="highlighted-code language-markup">
<div>
<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".NuestroFragment"&gt;
&lt;com.ilernaonline.miapp.CustomDrawableView
android:id="@+id/view"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
app:layout_constraintBottom_toBottomOf="parent"
app:layout_constraintEnd_toEndOf="parent"
app:layout_constraintStart_toStartOf="parent"
app:layout_constraintTop_toBottomOf="@+id/button_second" /&gt;</code></pre>
</div>
</div>
<p>Otra opción para crear un drawable sería heredar directamente de Drawable:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>import android.graphics.Canvas
import android.graphics.ColorFilter
import android.graphics.Paint
import android.graphics.PixelFormat
import android.graphics.drawable.Drawable
import kotlin.math.min
class NuestroDrawable : Drawable() {
private val redPaint: Paint = Paint().apply { setARGB(255, 255, 0, 0) }
override fun draw(canvas: Canvas) {
// Obtenemos los márgenes que nos han dejado
val width: Int = bounds.width()
val height: Int = bounds.height()
val radius: Float = min(width, height).toFloat() / 2f
// Dibujamos un circulo rojo en mitad de la vista
canvas.drawCircle((width/2).toFloat(), (height/2).toFloat(), radius, redPaint)
}
override fun setAlpha(alpha: Int) {
// Sobrescribir este método es obligatorio aunque no lo uses
}
override fun setColorFilter(colorFilter: ColorFilter?) {
// Sobrescribir este método es obligatorio aunque no lo uses
}
override fun getOpacity(): Int =
// Puede ser PixelFormat.UNKNOWN, TRANSLUCENT, TRANSPARENT, or OPAQUE
PixelFormat.OPAQUE
}
</code></pre>
</div>
</div>
<p>NuestroDrawable hereda de Drawable. Crea un objeto Pain de color rojo, que utilizará en el método draw que ya conocemos. En el método draw utilizamos el objeto Canvas que nos pasan por parámetro para dibujar un círculo con el método drawCircle. La clase Canvas es la responsable de dibujar todas las primitivas de imagen, se trata de un lienzo virtual que contiene las llamadas a métodos de dibujo para finalmente presentar una imagen. Los objetos drawables pueden utilizar un bitmap, es decir, una imagen corriente para definir su apariencia, y/o utilizar la clase Canvas para definir formas básicas como óvalos y rectángulos. La clase ShapeDrawable que vimos anteriormente no hace más que utilizar las funciones del Canvas para definir su aspecto.</p>
<p>Continuemos con nuestro código. En el layout, podríamos definir un componente ImageView:</p>
<div class="highlighted-code language-markup">
<div>
<pre><code>&lt;ImageView
android:id="@+id/imageView"
android:layout_width="100dp"
android:layout_height="100dp"
app:layout_constraintBottom_toTopOf="parent"
app:layout_constraintEnd_toEndOf="parent"
app:layout_constraintStart_toStartOf="parent"
app:layout_constraintTop_toTopOf="parent"
android:contentDescription="Nuestra imagen" /&gt;</code></pre>
</div>
</div>
<p>Y en el código lo iniciaríamos con:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
super.onViewCreated(view, savedInstanceState)
imageView.setImageDrawable(NuestroDrawable())
...
}</code></pre>
</div>
</div></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="35_imgenes.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="36_eventos_de_teclado.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_cedec_js.js"></script></body></html>