<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3.3.2. Context | UA03. Programando... </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="David Bermúdez Alcántara" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.7 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<link rel="stylesheet" type="text/css" href="udl-content.css" />
<script type="text/javascript" src="udl-content.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
	</head>
<body class="exe-web-site" id="exe-node-6"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">UA03. Programando...</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UA03. Programando...</a></li>
   <li><a href="31_herramientas.html" class="no-ch">3.1. Herramientas</a></li>
   <li><a href="32_fases_de_construccin.html" class="no-ch">3.2. Fases de construcción</a></li>
   <li class="current-page-parent"><a href="33_interfaces_de_usuario.html" class="current-page-parent daddy">3.3. Interfaces de usuario</a>
   <ul>
      <li><a href="331_activity_y_layout.html" class="no-ch">3.3.1. Activity y Layout</a></li>
      <li id="active"><a href="332_context.html" class="active no-ch">3.3.2. Context</a></li>
      <li><a href="333_intent.html" class="no-ch">3.3.3. Intent</a></li>
      <li><a href="334_tareas.html" class="no-ch">3.3.4. Tareas</a></li>
      <li><a href="335_fragment.html" class="no-ch">3.3.5. Fragment</a></li>
   </ul>
   </li>
   <li><a href="34_otras_ventanas.html" class="no-ch">3.4. Otras ventanas</a></li>
   <li><a href="35_imgenes.html" class="daddy">3.5. Imágenes</a>
   <ul class="other-section">
      <li><a href="351_drawables.html" class="no-ch">3.5.1. Drawables</a></li>
   </ul>
   </li>
   <li><a href="36_eventos_de_teclado.html" class="no-ch">3.6. Eventos de teclado</a></li>
   <li><a href="37_sonidos.html" class="no-ch">3.7. Sonidos</a></li>
   <li><a href="ejercicio_1.html" class="no-ch">Ejercicio 1</a></li>
   <li><a href="ejercicio_2.html" class="no-ch">Ejercicio 2</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="331_activity_y_layout.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="333_intent.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">3.3.2. Context</h1></header>
<article class="iDevice_wrapper UDLcontentIdevice" id="id7">
<div class="iDevice emphasis0" >
<div id="ta7_835_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-representation"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>Como se ha visto anteriormente, lo más importante de las clases del SDK de Android, es el ciclo de vida. Muchos errores de programación Android son debidos a un descuido en el ciclo de vida tanto de actividades como de fragmentos, servicios y otros componentes del sistema operativo.</p>
<p>Estos componentes tienen lo que se denomina un <strong>contexto</strong>, que es una especie de identificador del recurso. De hecho, una clase <strong>Activity</strong> hereda de la clase <strong>Context</strong> a través de una larga cadena de subclases.</p>
<p>En palabras más precisas, <strong>Context</strong> se considera una clase abstracta que nosotros como desarrolladores, directamente, no podemos crear, debido a que es uno de los objetos que crea el propio sistema como, por ejemplo, sucede con los Activities. Muchos de los componentes que se suelen utilizar en el desarrollo de una app Android son heredados de clases <strong>context</strong>.</p>
<p>La clase context se utiliza para la obtención de recursos específicos de la aplicación; no obstante, es oportuno resaltar que existen diferentes tipos de lo qué es context en Android. Estos tipos son:</p>
<ul>
<li>Application.</li>
<li>Activity.</li>
<li>Service.</li>
<li>BroadCastReciver.</li>
<li>ContentProvider.</li>
</ul>
<p>Cada uno de estos objetos tiene una información diferente de modo que, dependiendo de cuándo o dónde lo vayamos a utilizar, nos va a dar una información u otra.</p>
<p>Por ejemplo, si quieres implementar un context para conocer si el dispositivo se encuentra en posición vertical o en posición horizontal, llamas al context del activity y obtienes dicha información, mientras que en el context application no puedes acceder a ella.</p></div></div></section></div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_think" id="id8">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_think.png)"><h1 class="iDeviceTitle">Descuido en el Context</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta8_836_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>Para comprobar cómo un descuido con los contextos puede ser un gran problema, añade el siguiente código sobrescribiendo la función <strong>onResume</strong> para que se cambie el texto cuando la actividad vuelva a ser visible:</p>
<div class="highlighted-code language-java">
<div>
<pre><code>override fun onResume() {
    super.onResume()
    tvSaludo.text = "Ahora el contexto es: $this"   // Cambio el texto
    Log.e("MainActivity", "Ahora el contexto es: $this")
}</code></pre>
</div>
</div>
<p>Lanza la aplicación al terminal y rota el terminal. Observa que <strong>el identificador ha cambiado</strong>. Esto se debe a que, cada vez que rotamos el móvil, el <strong>giroscopio</strong> o <strong>acelerómetro</strong> integrado en el terminal avisarán al sistema operativo de que la orientación de la pantalla ha cambiado. El sistema reliza en ese momento lo siguiente:</p>
<ol>
<li>preguntará a la app cómo desea adaptarse al cambio de formato de portrait a landscape, o viceversa.</li>
<li>Por defecto, la actividad será destruida y recreada con la nueva configuración de pantalla.</li>
<li>Lo mismo ocurriría con otros cambios del sistema, podemos adaptarnos a ellos o dejar que el sistema operativo destruya y vuelva a construir la actividad.</li>
</ol>
<div class="exe-layout-2-cols exe-layout-2-50-50 exe-clear">
<div class="exe-col exe-col-1">
<p>Esto no ocurre cuando llevamos la aplicación a background y la volvemos a activar.&nbsp; ¿Qué ocurriría si almacenásemos el contexto en una variable e intentásemos utilizarla más tarde sin tener en cuenta el ciclo de vida de la actividad? Pues que estaríamos utilizando un <strong>contexto desfasado</strong>.</p>
<p>Si ejecutamos este código y rotamos el terminal, veremos que el contexto ya no es el mismo que era antes de la rotación. Una vez más, debemos tener cuidado y respetar el ciclo de vida de los componentes del sistema Android.</p>
</div>
<div class="exe-col exe-col-2">
<div class="highlighted-code language-java">
<div>
<pre><code>class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        if(contexto == null)
        contexto = this
    }
    override fun onResume() {
        super.onResume()
        tvSaludo.text = "Son iguales los contextos: ${this == contexto}"
        Log.e("MainActivity", "Son iguales los contextos: ${this == contexto}")
    }
    companion object {
        private var contexto: Context? = null
    }
}</code></pre>
</div>
</div>
</div>
</div></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper UDLcontentIdevice em_iDevice em_iDevice_info" id="id11">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_info.png)"><h1 class="iDeviceTitle">Enlaces</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta11_839_2" class="block iDevice_content">
<div class="exe-udlContent exe-udlContent-engagement"><section class="exe-udlContent-block"><div class="exe-udlContent-content"><div class="exe-udlContent-content-main"><p>...</p></div></div></section></div>
</div>
</div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="331_activity_y_layout.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="333_intent.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_cedec_js.js"></script></body></html>