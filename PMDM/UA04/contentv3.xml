<?xml version="1.0" encoding="utf-8"?>

<instance xmlns="http://www.exelearning.org/content/v0.3" reference="1" version="0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.exelearning.org/content/v0.3 content.xsd" class="exe.engine.package.Package">
 <dictionary>
  <string role="key" value="_title"></string>
  <unicode value="UA04. Comunicando..."></unicode>
  <string role="key" value="idevices"></string>
  <list></list>
  <string role="key" value="_addPagination"></string>
  <bool value="0"></bool>
  <string role="key" value="_addSearchBox"></string>
  <bool value="0"></bool>
  <string role="key" value="_author"></string>
  <unicode value="David Bermúdez"></unicode>
  <string role="key" value="_backgroundImg"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextMode"></string>
  <unicode value=""></unicode>
  <string role="key" value="_contextPlace"></string>
  <unicode value=""></unicode>
  <string role="key" value="_description"></string>
  <unicode value="Programación Multimedia de Dispositivos Móviles"></unicode>
  <string role="key" value="_docType"></string>
  <unicode value="HTML5"></unicode>
  <string role="key" value="_exportElp"></string>
  <bool value="0"></bool>
  <string role="key" value="_extraHeadContent"></string>
  <unicode value=""></unicode>
  <string role="key" value="_fieldValidationInfo"></string>
  <dictionary>
   <unicode role="key" value="all"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_title"></unicode>
     <unicode value="pp_lang"></unicode>
     <unicode value="pp_description"></unicode>
     <unicode value="pp_author"></unicode>
     <unicode value="pp_newlicense"></unicode>
    </list>
   </dictionary>
   <unicode role="key" value="procomun"></unicode>
   <dictionary>
    <unicode role="key" value="mandatory_fields"></unicode>
    <list>
     <unicode value="pp_learningResourceType"></unicode>
    </list>
    <unicode role="key" value="values_from_list"></unicode>
    <dictionary>
     <unicode role="key" value="pp_learningResourceType"></unicode>
     <list>
      <unicode value="master class"></unicode>
      <unicode value="closed exercise or problem"></unicode>
      <unicode value="real project"></unicode>
      <unicode value="didactic game"></unicode>
      <unicode value="webquest"></unicode>
      <unicode value="open problem"></unicode>
      <unicode value="simulation"></unicode>
      <unicode value="questionnaire"></unicode>
      <unicode value="conceptual map"></unicode>
     </list>
    </dictionary>
   </dictionary>
  </dictionary>
  <string role="key" value="_intendedEndUserRoleGroup"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleTutor"></string>
  <bool value="0"></bool>
  <string role="key" value="_intendedEndUserRoleType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_isChanged"></string>
  <bool value="0"></bool>
  <string role="key" value="_isTemplate"></string>
  <bool value="0"></bool>
  <string role="key" value="_lang"></string>
  <unicode value="es"></unicode>
  <string role="key" value="_learningResourceType"></string>
  <unicode value=""></unicode>
  <string role="key" value="_levelNames"></string>
  <list>
   <unicode value="Tema"></unicode>
   <unicode value="Sección"></unicode>
   <unicode value="Unidad"></unicode>
  </list>
  <string role="key" value="_name"></string>
  <unicode value="UA04"></unicode>
  <string role="key" value="_nextIdeviceId"></string>
  <int value="23"></int>
  <string role="key" value="_nextNodeId"></string>
  <int value="10"></int>
  <string role="key" value="_nodeIdDict"></string>
  <dictionary>
   <unicode role="key" value="0"></unicode>
   <instance class="exe.engine.node.Node" reference="9">
    <dictionary>
     <string role="key" value="_title"></string>
     <unicode value="UA04. Comunicando..."></unicode>
     <string role="key" value="idevices"></string>
     <list></list>
     <string role="key" value="_id"></string>
     <unicode value="0"></unicode>
     <string role="key" value="_package"></string>
     <reference key="1"></reference>
     <string role="key" value="anchor_fields"></string>
     <list></list>
     <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
     <int value="2"></int>
     <string role="key" value="exportType"></string>
     <string value="website"></string>
     <string role="key" value="last_full_node_path"></string>
     <string value="exe-node:UA04.%20Comunicando..."></string>
     <string role="key" value="parent"></string>
     <none></none>
     <string role="key" value="top_anchors_linked_from_fields"></string>
     <list></list>
     <string role="key" value="children"></string>
     <list>
      <instance class="exe.engine.node.Node" reference="4">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4.1. Tipos de conexiones"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="2">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="3">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="835_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="2"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Los terminales móviles tienen una gran habilidad para conectarse con otros dispositivos, ya sea mediante llamadas de &lt;strong&gt;voz&lt;/strong&gt;, de &lt;strong&gt;VoIP&lt;/strong&gt;, &lt;strong&gt;Bluetooth&lt;/strong&gt;, &lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/usb?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;USB&lt;/strong&gt;&lt;/a&gt;, &lt;strong&gt;internet&lt;/strong&gt; mediante datos del operador o &lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/wifi-scan?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;wifi&lt;/strong&gt;&lt;/a&gt;, además de &lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/vpn?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;VPN&lt;/strong&gt;&lt;/a&gt;; algunos incluso disponen de comunicación infrarroja &lt;strong&gt;IR&lt;/strong&gt;, o &lt;strong&gt;NFC&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Comentemos brevemente algunos de estos tipos de conexiones:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/telecom?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;Telecom&lt;/strong&gt;&lt;/a&gt;: el framework Telecom de Android administra las llamadas y videollamadas. Eso incluye las llamadas clásicas mediante el framework &lt;strong&gt;Telephony&lt;/strong&gt; y las llamadas &lt;strong&gt;VoIP&lt;/strong&gt; mediante la API &lt;strong&gt;ConnectionService&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/training/basics/network-ops?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;Internet&lt;/strong&gt;&lt;/a&gt;: Ya sea mediante datos del operador de telecomunicaciones o mediante conexión a una red wifi a la que tenga acceso, el dispositivo móvil podrá acceder a internet. Podríamos utilizar la siguiente función para comprobar si disponemos de conexión; de no tener, podríamos pedir al usuario que la activase. Se utilizan los métodos del servicio &lt;strong&gt;ConnectivityManager&lt;/strong&gt; para comprobar qué tipos de conexiones están disponibles.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/bluetooth?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;Bluetooth&lt;/strong&gt;&lt;/a&gt;: las conexiones BT se utilizan en miles de aplicaciones. Podemos usar Bluetooth para enviar sonido desde una app hasta nuestros auriculares, o para obtener los datos de nuestra pulsera de ejercicio. Se podrían distinguir dos tipos de conexión Bluetooth: la &lt;strong&gt;Classic&lt;/strong&gt; y la &lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/bluetooth/ble-overview?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;Low Energy&lt;/strong&gt; o &lt;strong&gt;LE&lt;/strong&gt;&lt;/a&gt;. Esta última es la más usada debido a la cantidad de pequeños dispositivos conectables con nuestro smartphone, que sólo necesitan una cantidad limitada de datos para comunicarse. El Low Energy va montado sobre las funcionalidades del Classic, pero, una vez establecida la conexión, la transmisión de datos es más eficiente energéticamente. Android dispone de las clases necesarias para escanear el entorno en busca de dispositivos BT, parearse con ellos, conectarse y comenzar el intercambio de datos. Para ello, dispondremos de clases como &lt;strong&gt;BluetoothAdapter&lt;/strong&gt; y &lt;strong&gt;BluetoothDevice&lt;/strong&gt;, localizadas en el paquete &lt;strong&gt;android.bluetooth&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/nfc?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;NFC&lt;/strong&gt;&lt;/a&gt;: &lt;strong&gt;Near Field Communication&lt;/strong&gt; es un conjunto de tecnologías wireless de rango muy corto (alrededor de cuatro centímetros). Sin embargo, a diferencia del Bluetooth, es una comunicación más sencilla y rápida al no necesitar descubrimiento de dispositivos ni emparejamiento alguno. NFC permite compartir datos entre una etiqueta NFC y un móvil con antena NFC, o entre dos móviles de este tipo, o entre el móvil y un sistema de pago, etcétera.&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="3"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="4"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="0"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="4"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="5">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="UWB"></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="6">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="835_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="5"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Android prepara el soporte oficial para &lt;strong&gt;UWB&lt;/strong&gt;, la conectividad de banda ultra ancha que aspira a reemplazar al Bluetooth. &lt;a href=&quot;https://www.xatakandroid.com/sistema-operativo/android-prepara-soporte-oficial-para-uwb-conectividad-banda-ultra-ancha-que-aspira-a-reemplazar-al-bluetooth&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Puedes ver la noticia aquí&lt;/a&gt; y su apartado en el manual de Android, &lt;a href=&quot;https://developer.android.com/guide/topics/connectivity/uwb?hl=es-419&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;aquí&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="6"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="4"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="ask"></unicode>
           <string role="key" value="id"></string>
           <unicode value="5"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="4"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="7">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Ejemplo"></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="8">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="836_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="7"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;La siguiente función devuelve si existe una conexión a Internet activa o no:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;private fun checkForInternet(context: Context): Boolean {

        // registra la actividad mediante el Servicio de control de conectividad
        val connectivityManager = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
        // Devuelve un objeto de tipo Network correspondiente a la conexión actual o FALSE
        val network = connectivityManager.activeNetwork ?: return false

        // Devuelve las capacidades de la conexión activa
        val activeNetwork = connectivityManager.getNetworkCapabilities(network) ?: return false

        return when {
            // Indica si la red usa un transporte WIFI,
            // o si WiFi tiene conectividad
            activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&amp;gt; true

            // Indica si la red usa un transporte de red móvil,
            // o si la red móvil tiene conectividad
            activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&amp;gt; true

            // si no, devuelve false
            else -&amp;gt; false
        }
    }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si realizamos una llamada (por &lt;em&gt;listener&lt;/em&gt;, cambios de estado, etc.), podemos gestionar su retorno para realizar alguna acción al respecto. Por ejemplo, hacer una transferencia de información si existe conexión, avisar al usuario si no existiera, etc...&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;checkButton.setOnClickListener() {
            if (checkForInternet(this)) {
                Toast.makeText(this, &quot;Connected&quot;, Toast.LENGTH_SHORT).show()
            } else {
                Toast.makeText(this, &quot;Disconnected&quot;, Toast.LENGTH_SHORT).show()
            }
        }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="8"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="4"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="think"></unicode>
           <string role="key" value="id"></string>
           <unicode value="6"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="4"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="1"></unicode>
        <string role="key" value="_package"></string>
        <reference key="1"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:UA04.%20Comunicando...:4.1.%20Tipos%20de%20conexiones"></string>
        <string role="key" value="parent"></string>
        <reference key="9"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="12">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4.2. Gestión de la comunicación"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="10">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="11">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="836_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="10"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;En cualquier tipo de comunicación inalámbrica que elijamos, debemos tener presentes ciertos problemas comunes a todos ellos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Estabilidad:&lt;/strong&gt; las comunicaciones inalámbricas no utilizan ningún medio para transmitirse, pueden hacerlo en el aire, el agua o el vacío. Por ello, cualquier otra señal ajena a nuestro canal puede interponerse fácilmente entre el emisor y el receptor, degradando la comunicación. Normalmente, todos los sistemas de comunicaciones tienen un sistema corrector de errores en su interior que intentará corregir cualquier dato que haya sido corrompido por el canal, pero, llegado a un límite, la conexión puede perderse y, como programadores, debemos tener estos factores en cuenta. Por ejemplo, podríamos tener un listener que reaccionase ante una desconexión, intentando la reconexión.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Seguridad:&lt;/strong&gt; como hemos dicho, el medio en el que se construye el canal está abierto a cualquiera, no es un cable que haya que conectar. Existe el problema de que un agente malicioso se adhiera al canal, escuchando o enviando datos, haciéndose pasar por otro y comprometiendo la seguridad de la información. Como programadores, debemos adherirnos a los protocolos y mecanismos que permiten la comunicación segura entre dispositivos: TLS, certificados, etcétera.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Eficiencia:&lt;/strong&gt; debemos tener en cuenta la velocidad de cada sistema de transmisión, el gasto de batería que supone cada uno, el espacio que&amp;nbsp; necesitarán los datos en memoria y los procedimientos manuales que serán obligatorios para el usuario, entre otras cuestiones. Cada mecanismo se adaptará a cada necesidad mejor que otro, y es nuestra obligación encontrar el mejor en cada caso.&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="11"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="12"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="2"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="12"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="13">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Ejemplos útiles"></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="14">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="837_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="13"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://programacionymas.com/blog/detectar-cuando-app-se-conecta-o-desconecta-internet&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Listener para comprobar conexión&lt;/a&gt; (un poco desactualizado)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="14"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="12"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="ask"></unicode>
           <string role="key" value="id"></string>
           <unicode value="7"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="12"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="15">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="Ejemplo práctico"></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="1"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="16">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="114_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="15"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Ejemplo de aplicación con WebView que muestra una página Web y un comprobador de conexión a Internet mediante Wi-Fi o Móvil.&lt;/p&gt;
&lt;p&gt;Puedes descarcar el &lt;a href=&quot;resources/MainActivity.kt&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MainActivity.kt&lt;/a&gt; y el &lt;a href=&quot;resources/activity_main.xml&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;activity_main.xml&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Tendrás que dar ciertos permisos. Averigua cuáles.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="149514"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="8_114_2.6"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="17">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="15"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="1"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="activity_main.xml"></string>
                     <string role="key" value="_userName"></string>
                     <string value="c:\\users\\david\\appdata\\local\\temp\\tmperz_du\\activity_main.xml"></string>
                     <string role="key" value="checksum"></string>
                     <string value="02985fe3f4d8bdc899a006c9f0c6317b"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="16"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="149516"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="8_114_2.7"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="18">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="15"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="1"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="MainActivity.kt"></string>
                     <string role="key" value="_userName"></string>
                     <string value="c:\\users\\david\\appdata\\local\\temp\\tmperz_du\\MainActivity.kt"></string>
                     <string role="key" value="checksum"></string>
                     <string value="0b3a7fa642ffc3d40563a8f8ac4b18cb"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="16"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="16"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="8"></int>
              <string role="key" value="parentNode"></string>
              <reference key="12"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value="technology"></unicode>
           <string role="key" value="id"></string>
           <unicode value="8"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="12"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="17"></reference>
            <reference key="18"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="2"></unicode>
        <string role="key" value="_package"></string>
        <reference key="1"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:UA04.%20Comunicando...:4.2.%20Gesti%C3%B3n%20de%20la%20comunicaci%C3%B3n"></string>
        <string role="key" value="parent"></string>
        <reference key="9"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="21">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4.3. Búsqueda de dispositivos"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="19">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="20">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="837_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="19"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Para que dos dispositivos puedan conectarse, uno de ellos tiene que establecerse en modo de visible y conectable; el otro estará visible y en búsqueda hasta que encuentre al primero. Entonces se llevará a cabo el emparejamiento de los dos dispositivos.&lt;/p&gt;
&lt;p&gt;El emparejamiento puede ser directo o requerir una contraseña. Una vez emparejados, los dispositivos pueden establecer una conexión y comenzar el intercambio de datos de uno a otro.&lt;/p&gt;
&lt;p&gt;Veamos cómo programar una aplicación que busque los dispositivos Bluetooth que tenga a su alcance. Abrimos Android Studio y ejecutamos &lt;strong&gt;File &amp;gt; New &amp;gt; New Project... &amp;gt; Empty Activity &amp;gt; Finish&lt;/strong&gt;. Tendremos la actividad &lt;strong&gt;MainActivity&lt;/strong&gt; y su layout &lt;strong&gt;activity_main&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Primero vamos a añadir en el &lt;strong&gt;build.gradle&lt;/strong&gt; del módulo de aplicación las siguientes librerías:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;def coroutines_version = '1.3.7'
// Coroutines
implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:$coroutines_version&quot;
implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:$coroutines_version&quot;
// EventBus
implementation 'org.greenrobot:eventbus:3.2.0'
// RecyclerView
implementation 'androidx.recyclerview:recyclerview:1.1.0'&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Las primeras dos instrucciones &lt;strong&gt;implementation&lt;/strong&gt; son para poder utilizar &lt;a href=&quot;https://developer.android.com/kotlin/coroutines&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;coroutines&lt;/strong&gt; &lt;/a&gt;en nuestra app, de modo que podamos llamar a funciones de BT sin que el hilo principal se bloquee. Después incluimos &lt;strong&gt;EventBus&lt;/strong&gt; para enviar mensajes desde una clase a otra. Por último, incluimos la librería de Android para utilizar las listas reciclables. El &lt;strong&gt;RecyclerView&lt;/strong&gt; es un componente de interfaz gráfica que nos permite presentar una lista de elementos de forma eficiente.&lt;/p&gt;
&lt;p&gt;Para manipular el dispositivo Bluetooth del terminal, nuestra app tendrá que registrar algunos registros en el manifest. Además, definiremos una clase App:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;

&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.example.bluetooth&quot;&amp;gt;
&amp;lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;&amp;gt;&amp;lt;/uses-permission&amp;gt;
&amp;lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot;&amp;gt;&amp;lt;/uses-permission&amp;gt;
&amp;lt;application android:name=&quot;.App&quot; android:allowbackup=&quot;true&quot; android:icon=&quot;@mipmap/ic_launcher&quot; android:label=&quot;@string/app_name&quot; android:roundicon=&quot;@mipmap/ic_launcher_round&quot; android:supportsrtl=&quot;true&quot; android:theme=&quot;@style/AppTheme&quot;&amp;gt;
&amp;lt;activity android:name=&quot;.MainActivity&quot;&amp;gt;
&amp;lt;intent-filter&amp;gt;
&amp;lt;action android:name=&quot;android.intent.action.MAIN&quot;&amp;gt;&amp;lt;/action&amp;gt;
&amp;lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;&amp;gt;&amp;lt;/category&amp;gt;
&amp;lt;/intent-filter&amp;gt;
&amp;lt;/activity&amp;gt;
&amp;lt;/application&amp;gt;
&amp;lt;/manifest&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Como la hemos definido en el manifest, tendremos que crear una clase &lt;strong&gt;Application&lt;/strong&gt; para nuestra aplicación. Pulsemos con el botón derecho sobre el nombre del paquete de la app y elijamos &lt;strong&gt;File &amp;gt; New &amp;gt; Kotlin File/Class&lt;/strong&gt;. El código es:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.app.Application
class App : Application() {
override fun onCreate() {
super.onCreate()
_instance = this
}
companion object {
private var _instance: App? = null
val instance: App
get() = _instance!!
}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ahora podemos empezar a diseñar el &lt;strong&gt;layout&lt;/strong&gt;. Añadiremos algunos botones y un par de &lt;strong&gt;RecyclerView&lt;/strong&gt; que mostrarán listas de dispositivos &lt;strong&gt;Bluetooth&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.MainActivity&quot;&amp;gt;

    &amp;lt;Button
        android:id=&quot;@+id/btnEscanear&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginstart=&quot;16dp&quot;
        android:layout_margintop=&quot;16dp&quot;
        android:text=&quot;Escanear&quot;
        app:layout_constraintstart_tostartof=&quot;parent&quot;
        app:layout_constrainttop_totopof=&quot;parent&quot;&amp;gt;&amp;lt;/Button&amp;gt;

    &amp;lt;Button
        android:id=&quot;@+id/btnVisible&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginend=&quot;16dp&quot;
        android:text=&quot;VISIBLE&quot;
        app:layout_constraintend_toendof=&quot;parent&quot;
        app:layout_constrainttop_totopof=&quot;@+id/btnEscanear&quot;&amp;gt;

        &amp;lt;androidx.recyclerview.widget.RecyclerView
            android:id=&quot;@+id/lstEscaner&quot;
            android:layout_width=&quot;0dp&quot;
            android:layout_height=&quot;200dp&quot;
            android:layout_marginend=&quot;16dp&quot;
            android:layout_marginstart=&quot;16dp&quot;
            android:layout_margintop=&quot;16dp&quot;
            app:layout_constraintend_toendof=&quot;parent&quot;
            app:layout_constraintstart_tostartof=&quot;parent&quot;
            app:layout_constrainttop_tobottomof=&quot;@+id/btnEscanear&quot;&amp;gt;

            &amp;lt;ProgressBar
                android:id=&quot;@+id/progressBarEscaneo&quot;
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                app:layout_constraintbottom_tobottomof=&quot;@+id/lstEscaner&quot;
                app:layout_constraintend_toendof=&quot;@+id/lstEscaner&quot;
                app:layout_constraintstart_tostartof=&quot;@+id/lstEscaner&quot;
                app:layout_constrainttop_totopof=&quot;@+id/lstEscaner&quot;&amp;gt;&amp;lt;/ProgressBar&amp;gt;
        &amp;lt;/androidx.recyclerview.widget.RecyclerView&amp;gt;
    &amp;lt;/Button&amp;gt;

    &amp;lt;Button
        android:id=&quot;@+id/btnPareados&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_margintop=&quot;32dp&quot;
        android:text=&quot;Pareados&quot;
        app:layout_constraintend_toendof=&quot;parent&quot;
        app:layout_constraintstart_tostartof=&quot;parent&quot;
        app:layout_constrainttop_tobottomof=&quot;@+id/lstEscaner&quot;
        &amp;gt;

        &amp;lt;androidx.recyclerview.widget.RecyclerView
            android:id=&quot;@+id/lstPareados&quot;
            android:layout_width=&quot;0dp&quot;
            android:layout_height=&quot;0dp&quot;
            android:layout_marginend=&quot;16dp&quot;
            android:layout_marginstart=&quot;16dp&quot;
            android:layout_margintop=&quot;16dp&quot;
            app:layout_constraintbottom_tobottomof=&quot;parent&quot;
            app:layout_constraintend_toendof=&quot;parent&quot;
            app:layout_constraintstart_tostartof=&quot;parent&quot;
            app:layout_constrainttop_tobottomof=&quot;@+id/btnPareados&quot;&amp;gt;&amp;lt;/androidx.recyclerview.widget.RecyclerView&amp;gt;
    &amp;lt;/Button&amp;gt;
&amp;lt;/androidx.constraintlayout.widget.ConstraintLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;El resultado sería algo como esto:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/conexionBT.png&quot; alt=&quot;Layout conexión BT&quot; title=&quot;Layout conexión BT&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;331&quot; height=&quot;590&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list>
                 <instance class="exe.engine.galleryidevice.GalleryImage">
                  <dictionary>
                   <string role="key" value="_caption"></string>
                   <instance class="exe.engine.field.TextField">
                    <dictionary>
                     <string role="key" value="_id"></string>
                     <int value="149515"></int>
                     <string role="key" value="_idevice"></string>
                     <none></none>
                     <string role="key" value="_instruc"></string>
                     <string value=""></string>
                     <string role="key" value="_name"></string>
                     <string value=""></string>
                     <string role="key" value="content"></string>
                     <string value=""></string>
                     <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                     <int value="4"></int>
                    </dictionary>
                   </instance>
                   <string role="key" value="_id"></string>
                   <unicode value="3_837_2.7"></unicode>
                   <string role="key" value="_imageResource"></string>
                   <instance class="exe.engine.resource.Resource" reference="22">
                    <dictionary>
                     <string role="key" value="_idevice"></string>
                     <reference key="19"></reference>
                     <string role="key" value="_package"></string>
                     <reference key="1"></reference>
                     <string role="key" value="_storageName"></string>
                     <string value="conexionBT.png"></string>
                     <string role="key" value="_userName"></string>
                     <string value="c:\\users\\david\\appdata\\local\\temp\\tmperz_du\\conexionBT.png"></string>
                     <string role="key" value="checksum"></string>
                     <string value="ae3579d59141272f624c1e722af90af2"></string>
                     <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                     <int value="2"></int>
                     <string role="key" value="warningMsg"></string>
                     <string value=""></string>
                    </dictionary>
                   </instance>
                   <string role="key" value="_parent"></string>
                   <reference key="20"></reference>
                   <string role="key" value="_thumbnailResource"></string>
                   <none></none>
                   <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                   <int value="3"></int>
                   <string role="key" value="makeThumbnail"></string>
                   <bool value="0"></bool>
                  </dictionary>
                 </instance>
                </list>
                <string role="key" value="idevice"></string>
                <reference key="20"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="8"></int>
              <string role="key" value="parentNode"></string>
              <reference key="21"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="3"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="21"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list>
            <reference key="22"></reference>
           </list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="23">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="24">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="838_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="23"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Antes de ponernos con la actividad, vamos a crear un objeto que llevará a cabo todo el trabajo de activar y escanear dispositivos Bluetooth. Pulsamos con el botón derecho sobre el nombre del paquete de nuestra aplicación y escogemos New &amp;gt; Kotlin File/Class. Lo llamaremos MiBluetooth, y lo codificaremos así:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.app.Activity
import android.bluetooth.*
import android.content.BroadcastReceiver
import android.content.Context
import android.content.Intent
import android.content.IntentFilter
import android.util.Log
import androidx.core.content.ContextCompat.startActivity
import org.greenrobot.eventbus.EventBus
object MiBluetooth {
/// EventBus event class
class EscaneoTerminado
private val appContext: Context? by lazy(LazyThreadSafetyMode.NONE) {
App.instance
}
private val _adapter: BluetoothAdapter? by lazy(LazyThreadSafetyMode.NONE) {
val bluetoothManager =
appContext!!.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager
bluetoothManager.adapter
}
private val adapter: BluetoothAdapter
get() = _adapter!!
val escaneados = ArrayList&lt;bluetoothdevice&gt;()
val estaDesactivado: Boolean
get() = !adapter.isEnabled
fun activar() {
adapter.enable()
}
fun visibilizar(context: Context, segundos: Int) {
val discoverableIntent
= Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE).apply {
putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, segundos)
}
startActivity(context, discoverableIntent, null)
}
private val escanearBroadcastReceiver = object: BroadcastReceiver() {
override fun onReceive(context: Context, intent: Intent) {
when(intent.action) {
BluetoothDevice.ACTION_FOUND, BluetoothDevice.ACTION_NAME_CHANGED -&amp;gt; {
val device: BluetoothDevice
= intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE)!!
escaneados.add(device)
EventBus.getDefault().post(device)
}
BluetoothAdapter.ACTION_DISCOVERY_FINISHED -&amp;gt; {
EventBus.getDefault().post(EscaneoTerminado())
}
}
}
}
fun comenzarEscaner(context: Context) {
val intentFilter = IntentFilter()
intentFilter.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED)
intentFilter.addAction(BluetoothDevice.ACTION_NAME_CHANGED)
context.registerReceiver(escanearBroadcastReceiver, intentFilter)
adapter.startDiscovery()
}
fun finalizarEscaner(context: Context) {
try {
context.unregisterReceiver(escanearBroadcastReceiver)
} catch (e: Exception) { }
}
fun listarPareados(): List&lt;bluetoothdevice&gt; {
return adapter.bondedDevices.toList()
}
}&lt;/bluetoothdevice&gt;&lt;/bluetoothdevice&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Podemos observar que &lt;strong&gt;BluetoothAdapter&lt;/strong&gt; es la clase más importante de este código, pues está presente en todas las llamadas a Bluetooth. Para obtener una instancia de la clase, llamaremos a:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;adapter = appContext.getSystemService(Context.BLUETOOTH_SERVICE).adapter&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;No debemos preocuparnos por la manera tan sofisticada del código, hace más o menos lo mismo, simplemente utilizamos &lt;strong&gt;by lazy&lt;/strong&gt; para no obtener el objeto hasta que no sea necesario. El resto de funciones utilizarán este objeto: por ejemplo, la función activar no hace más que &lt;strong&gt;adapter.enable&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Para escanear los dispositivos Bluetooth cercanos, el proceso es algo más complicado.&lt;/p&gt;
&lt;p&gt;Primero debemos crear un &lt;strong&gt;BroadcastReceiver&lt;/strong&gt;, que es un objeto que recibe llamadas del sistema o de otras clases. Es un mecanismo del sistema Android bastante parecido a &lt;strong&gt;EventBus&lt;/strong&gt;, de hecho, podríamos utilizar &lt;strong&gt;BroadcastReceiver&lt;/strong&gt; en lugar de &lt;strong&gt;EventBus&lt;/strong&gt;, pero este último es más moderno, cómodo y eficiente. Una vez creado el &lt;strong&gt;BroadcastReceiver&lt;/strong&gt;, lo programamos para que solo reciba ciertos mensajes mediante el &lt;strong&gt;IntentFilter&lt;/strong&gt;. En nuestro caso, nos interesan los mensajes: &lt;strong&gt;ACTION_NAME_CHANGED&lt;/strong&gt;, que recibiremos cuando se detecte un nuevo dispositivo, y &lt;strong&gt;ACTION_DISCOVERY_FINISHED&lt;/strong&gt;, que nos llegará cuando el sistema decida que el escáner ha terminado. Una vez preparado nuestro receptor de mensajes, llamaremos a &lt;strong&gt;adapter.startDiscovery&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Cada vez que recibamos un mensaje &lt;strong&gt;ACTION_NAME_CHANGED&lt;/strong&gt;, lo guardaremos en una lista y enviaremos un mensaje &lt;strong&gt;EventBus&lt;/strong&gt; para que cualquier otra clase pueda enterarse del evento.&lt;/p&gt;
&lt;p&gt;Veamos ahora cómo podemos utilizar esta clase en nuestra actividad:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.app.Activity
import android.bluetooth.BluetoothDevice
import android.content.Intent
import android.os.Bundle
import android.util.Log
import android.view.View
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import kotlinx.android.synthetic.main.activity_main.*
import org.greenrobot.eventbus.EventBus
import org.greenrobot.eventbus.Subscribe
import org.greenrobot.eventbus.ThreadMode
class MainActivity : AppCompatActivity() {
override fun onCreate(savedInstanceState: Bundle?) {
super.onCreate(savedInstanceState)
setContentView(R.layout.activity_main)
btnVisible.setOnClickListener {
MiBluetooth.visibilizar(this, CINCO_MINUTOS)
}
btnEscanear.setOnClickListener {
btnEscanear.isEnabled = false
progressBarEscaneo.visibility = View.VISIBLE
MiBluetooth.comenzarEscaner(applicationContext)
}
btnPareados.setOnClickListener {
btnPareados.isEnabled = false
lstPareados.adapter = BluetoothListAdapter(MiBluetooth.listarPareados())
btnPareados.isEnabled = true
}
progressBarEscaneo.visibility = View.GONE
val layoutManager1 = LinearLayoutManager(this)
lstEscaner.layoutManager = layoutManager1
val layoutManager2 = LinearLayoutManager(this)
lstPareados.layoutManager = layoutManager2
}
override fun onResume() {
super.onResume()
MiBluetooth.activar()
EventBus.getDefault().register(this)
}
override fun onPause() {
super.onPause()
MiBluetooth.finalizarEscaner(this)
EventBus.getDefault().unregister(this)
}
@Subscribe(threadMode = ThreadMode.MAIN)
fun onBluetoothDevice(device: BluetoothDevice) 
lstEscaner.adapter = BluetoothListAdapter(MiBluetooth.escaneados)
}
@Subscribe(threadMode = ThreadMode.MAIN)
fun onBluetoothEscaneoTerminado(escaneo: MiBluetooth.EscaneoTerminado) {
btnEscanear.isEnabled = true
progressBarEscaneo.visibility = View.GONE
lstEscaner.adapter =
BluetoothListAdapter(MiBluetooth.escaneados)
}
companion object {
private const val CINCO_MINUTOS = 300
}
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En &lt;strong&gt;onCreate&lt;/strong&gt; establecemos las acciones para los botones.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Para el botón &lt;strong&gt;Visible&lt;/strong&gt;, llamamos a &lt;strong&gt;MiBluetooth.visibilizar&lt;/strong&gt;, que pedirá al sistema Android que haga visible el dispositivo actual durante el tiempo especificado.&lt;/li&gt;
&lt;li&gt;Para el botón &lt;strong&gt;Escanear&lt;/strong&gt;, llamamos a la función &lt;strong&gt;MiBluetooth.comenzarEscaner&lt;/strong&gt;. Para obtener los dispositivos ya pareados, llamamos a &lt;strong&gt;MiBluetooth.listarPareados&lt;/strong&gt;. El resultado se utiliza como parámetro del objeto &lt;strong&gt;BluetoothListAdapter. &lt;/strong&gt;Tras establecer las acciones para los botones, vemos cómo creamos un &lt;strong&gt;layout&lt;/strong&gt; que estableceremos en sendos &lt;strong&gt;RecyclerView&lt;/strong&gt;. Esto es así debido a la gran capacidad de adaptación que tiene este control. En nuestro caso, nos basta con el layout más sencillo, pues solo le pedimos a cada elemento de la lista que muestre un texto plano.&lt;/li&gt;
&lt;li&gt;Después de &lt;strong&gt;onCreate&lt;/strong&gt;, tenemos &lt;strong&gt;onResume&lt;/strong&gt; y &lt;strong&gt;onPause&lt;/strong&gt;. En estas funciones aprovechamos para registrarnos como observadores de mensajes &lt;strong&gt;EventBus&lt;/strong&gt;, de modo que podamos escuchar las respuestas de &lt;strong&gt;MiBluetooth&lt;/strong&gt;. Además, en &lt;strong&gt;onResume&lt;/strong&gt; activamos el Bluetooth de nuestro dispositivo, por si no estuviese activo aún.&lt;/li&gt;
&lt;li&gt;Ahora vemos dos funciones de suscripción a mensajes de EventBus. Sus nombres no importan realmente, ya que EventBus los distingue por los parámetros, de modo que el primero recibe un &lt;strong&gt;BluetoothDevice&lt;/strong&gt;, que es el mensaje que obtendremos cuando el sistema nos comunique que ha encontrado un nuevo dispositivo BT, y el segundo mensaje lo recibiremos cuando el escáner haya terminado. Si hubiésemos metido todo el código de &lt;strong&gt;MiBluetooth&lt;/strong&gt; en &lt;strong&gt;MainActivity&lt;/strong&gt;, nos hubiésemos ahorrado los mensajes EventBus, pues nos llegarían mensajes directamente al &lt;strong&gt;BroadcastReceiver&lt;/strong&gt;, pero de este modo demostramos que es posible liberar a la activity de cualquier tarea, incluso de las que están asociadas a su contexto.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Por último, solo nos queda entender cómo funciona el BluetoothListAdapter. Esta clase será la responsable de administrar los elementos de los RecyclerView. Veamos su código:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.bluetooth.BluetoothDevice
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.recyclerview.widget.RecyclerView
class BluetoothListAdapter(
private val dataSet: List&amp;lt;BluetoothDevice&amp;gt;)
: RecyclerView.Adapter&amp;lt;BluetoothListAdapter.ViewHolder&amp;gt;() {
class ViewHolder(v: View) : RecyclerView.ViewHolder(v) {
val textView: TextView = v.findViewById(R.id.txt)
}
override fun onCreateViewHolder(viewGroup: ViewGroup, viewType: Int): ViewHolder {
val v = LayoutInflater
.from(viewGroup.context)
.inflate(R.layout.bluetooth_item, viewGroup, false)
return ViewHolder(v)
}
override fun onBindViewHolder(viewHolder: ViewHolder, position: Int) {
viewHolder.textView.text = dataSet[position].name
viewHolder.textView.setOnClickListener {
val device: BluetoothDevice = dataSet[position]
}
}
override fun getItemCount() = dataSet.size
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Esta clase recibe una lista de objetos, en nuestro caso, una lista de &lt;strong&gt;BluetoothDevices&lt;/strong&gt;. La eficiencia de los &lt;strong&gt;RecyclerView&lt;/strong&gt; reside en que, para mostrar una lista de cientos de elementos, el componente solo tiene en memoria la representación gráfica de los objetos que pueden verse, y no más. Para ello, define la clase &lt;strong&gt;ViewHolder&lt;/strong&gt;, que es la vista de un elemento. Cuando el usuario haga scroll sobre la lista, el RecyclerView irá reutilizando (reciclando) los ViewHolder con los datos de los nuevos elementos ahora visibles. Vemos cómo en &lt;strong&gt;onCreateViewHolder&lt;/strong&gt; utilizamos otro layout para definir qué aspecto tendrán los elementos de la lista. En nuestro caso, el layout del elemento es: &lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;FrameLayout
xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
xmlns:tools=&quot;http://schemas.android.com/tools&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;wrap_content&quot;
android:layout_marginLeft=&quot;8dp&quot;
android:layout_marginRight=&quot;8dp&quot;
android:gravity=&quot;center_vertical&quot;&amp;gt;
&amp;lt;TextView
android:id=&quot;@+id/txt&quot;
android:layout_width=&quot;wrap_content&quot;
android:layout_height=&quot;wrap_content&quot;
android:textSize=&quot;16sp&quot;
tools:text=&quot;Bluetooth Fake Name&quot;
/&amp;gt;
&amp;lt;/FrameLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Simplemente, un campo de texto que recibirá el nombre del Bluetooth. Como vemos, las funciones relativas al Bluetooth son bastante sencillas gracias a las clases del SDK de Android.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="24"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="21"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="4"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="21"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="3"></unicode>
        <string role="key" value="_package"></string>
        <reference key="1"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:UA04.%20Comunicando...:4.3.%20B%C3%BAsqueda%20de%20dispositivos"></string>
        <string role="key" value="parent"></string>
        <reference key="9"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list></list>
       </dictionary>
      </instance>
      <instance class="exe.engine.node.Node" reference="27">
       <dictionary>
        <string role="key" value="_title"></string>
        <unicode value="4.4. Permanencia"></unicode>
        <string role="key" value="idevices"></string>
        <list>
         <instance class="exe.engine.jsidevice.JsIdevice" reference="25">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value=""></unicode>
           <string role="key" value="_attributes"></string>
           <list>
            <tuple>
             <string value="title"></string>
             <list>
              <string value="Title"></string>
              <int value="0"></int>
              <int value="0"></int>
             </list>
            </tuple>
            <tuple>
             <string value="category"></string>
             <list>
              <string value="Category"></string>
              <int value="0"></int>
              <int value="1"></int>
             </list>
            </tuple>
            <tuple>
             <string value="css-class"></string>
             <list>
              <string value="CSS class"></string>
              <int value="0"></int>
              <int value="2"></int>
             </list>
            </tuple>
            <tuple>
             <string value="icon"></string>
             <list>
              <string value="Icon"></string>
              <int value="0"></int>
              <int value="3"></int>
             </list>
            </tuple>
           </list>
           <string role="key" value="_author"></string>
           <string value=""></string>
           <string role="key" value="_iDeviceDir"></string>
           <string value="udl-content"></string>
           <string role="key" value="_purpose"></string>
           <string value=""></string>
           <string role="key" value="_tip"></string>
           <string value=""></string>
           <string role="key" value="_valid"></string>
           <bool value="1"></bool>
           <string role="key" value="class_"></string>
           <unicode value="UDLcontent"></unicode>
           <string role="key" value="edit"></string>
           <bool value="0"></bool>
           <string role="key" value="emphasis"></string>
           <int value="0"></int>
           <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
           <int value="1"></int>
           <string role="key" value="fields"></string>
           <list>
            <instance class="exe.engine.field.TextAreaField" reference="26">
             <dictionary>
              <string role="key" value="_id"></string>
              <unicode value="854_2"></unicode>
              <string role="key" value="_idevice"></string>
              <reference key="25"></reference>
              <string role="key" value="_instruc"></string>
              <string value=""></string>
              <string role="key" value="_name"></string>
              <string value=""></string>
              <string role="key" value="anchor_names"></string>
              <list></list>
              <string role="key" value="anchors_linked_from_fields"></string>
              <dictionary></dictionary>
              <string role="key" value="content_w_resourcePaths"></string>
              <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Los programas, ya sean de escritorio, web o móvil, necesitan guardar datos de una ejecución a otra para su correcto funcionamiento. Quizá necesiten almacenar opciones de usuario, quizá guarden logs de depuración con errores y alertas, quizá estemos hablando de un juego en el que debemos guardar los jugadores y los puntos que han conseguido en cada partida. Veamos los métodos más usuales para guardar información en el dispositivo móvil.&lt;/p&gt;
&lt;p&gt;En Android las aplicaciones pueden guardar información de varias maneras:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pares de datos “Clave-Valor” (SharedPreferences)&lt;/li&gt;
&lt;li&gt;Ficheros&lt;/li&gt;
&lt;li&gt;Bases de datos SQLite&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En función del tipo y complejidad de la información a guardar se elegirá la forma de almacenamiento&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
              <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
              <int value="4"></int>
              <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
              <int value="2"></int>
              <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
              <int value="3"></int>
              <string role="key" value="htmlTag"></string>
              <string value="div"></string>
              <string role="key" value="images"></string>
              <instance class="exe.engine.galleryidevice.GalleryImages">
               <dictionary>
                <string role="key" value=".listitems"></string>
                <list></list>
                <string role="key" value="idevice"></string>
                <reference key="26"></reference>
               </dictionary>
              </instance>
              <string role="key" value="intlinks_to_anchors"></string>
              <dictionary></dictionary>
              <string role="key" value="nextImageId"></string>
              <int value="0"></int>
              <string role="key" value="parentNode"></string>
              <reference key="27"></reference>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="icon"></string>
           <unicode value=""></unicode>
           <string role="key" value="id"></string>
           <unicode value="9"></unicode>
           <string role="key" value="ideviceCategory"></string>
           <unicode value="Text and Tasks"></unicode>
           <string role="key" value="lastIdevice"></string>
           <bool value="0"></bool>
           <string role="key" value="nextFieldId"></string>
           <int value="3"></int>
           <string role="key" value="originalicon"></string>
           <string value=""></string>
           <string role="key" value="parentNode"></string>
           <reference key="27"></reference>
           <string role="key" value="systemResources"></string>
           <list></list>
           <string role="key" value="undo"></string>
           <bool value="1"></bool>
           <string role="key" value="userResources"></string>
           <list></list>
           <string role="key" value="version"></string>
           <int value="0"></int>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="_id"></string>
        <unicode value="4"></unicode>
        <string role="key" value="_package"></string>
        <reference key="1"></reference>
        <string role="key" value="anchor_fields"></string>
        <list></list>
        <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
        <int value="2"></int>
        <string role="key" value="exportType"></string>
        <string value="website"></string>
        <string role="key" value="last_full_node_path"></string>
        <string value="exe-node:UA04.%20Comunicando...:4.4.%20Permanencia"></string>
        <string role="key" value="parent"></string>
        <reference key="9"></reference>
        <string role="key" value="top_anchors_linked_from_fields"></string>
        <list></list>
        <string role="key" value="children"></string>
        <list>
         <instance class="exe.engine.node.Node" reference="30">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.4.1. SharedPreferences"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="28">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="29">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="855_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="28"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Si lo que necesitamos guardar no es más que un pequeño conjunto de pares clave-valor, deberíamos utilizar la clase &lt;strong&gt;SharedPreferences&lt;/strong&gt;. Un objeto de este tipo utilizará un archivo para escribir y leer pares &lt;strong&gt;clave-valor&lt;/strong&gt;. Pero nosotros solo veremos una simple interfaz con algunos pocos métodos con los que podremos hacer persistentes nuestros datos. Si necesitamos el objeto desde un objeto de nuestra app que no sea una activity, tendríamos que crearlo con:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val sharedPref = getSharedPreferences(&quot;configuracion&quot;, Context.MODE_PRIVATE)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Lo que hace esta función es crear, o abrir si ya existiese, un archivo de pares clave-valor con el nombre pasado como primer parámetro. El segundo parámetro es un flag que controla la creación del archivo.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MODE_PRIVATE&lt;/strong&gt; hará que este archivo sea privado para otras apps. Este archivo sería accesible desde cualquier parte de la aplicación.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MODE_WORLD_READABLE&lt;/strong&gt; y &lt;strong&gt;MODE_WORLD_WRITEABLE&lt;/strong&gt; dan acceso en lectura y escritura respectivamente a todo el mundo.&lt;/p&gt;
&lt;p&gt;Si, por el contrario, quisiéramos almacenar solo valores para una actividad en concreto, podríamos crear el objeto con:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val sharedPref = getPreferences(Context.MODE_PRIVATE)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquí se ahorra el nombre del archivo, porque el archivo estará asociado unívocamente con la &lt;strong&gt;activity&lt;/strong&gt; que lo llame. De este modo, podríamos tener un archivo por actividad sin riesgo de confundirnos con los nombres.&lt;/p&gt;
&lt;div class=&quot;exe-fx exe-accordion&quot;&gt;
&lt;h2&gt;Almacenar valores&lt;/h2&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val sharedPref = getPreferences(Context.MODE_PRIVATE)
with(sharedPref.edit()) {
putInt(&quot;claveInt&quot;, 69)
putString(&quot;claveString&quot;, &quot;valor&quot;)
putBoolean(&quot;claveBoolean&quot;, true)
//...
//commit()//llamada síncrona, ten cuidado con el main thread
apply()//llamada asíncrona, puedes llamarla en el main thread
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Vemos que lo primero es acceder a una instancia de SharedPreferences con uno de los dos métodos que hemos visto. Después, llamaríamos a &lt;strong&gt;edit&lt;/strong&gt; para ponernos en &lt;strong&gt;modo escritura&lt;/strong&gt;. Ahora podríamos llamar a los métodos &lt;strong&gt;putX&lt;/strong&gt; necesarios para guardar todas nuestras variables.&lt;/p&gt;
&lt;p&gt;Por cada tipo de datos, tendremos una llamada a la clase. Cuando hallamos terminado, llamaremos a &lt;strong&gt;apply&lt;/strong&gt;, que dará por finalizada la edición, aunque el proceso de escritura definitivo lo ejecutará en un hilo distinto para no paralizar la interfaz gráfica de la &lt;strong&gt;activity&lt;/strong&gt;. Si fuesen pocos campos, podríamos llamar a &lt;strong&gt;comit&lt;/strong&gt;, pero salvo que sea imprescindible, preferiremos utilizar el método &lt;strong&gt;apply&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Recuperar datos&lt;/h2&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val sharedPref = getPreferences(Context.MODE_PRIVATE)
val valorInt = sp1.getInt(&quot;claveInt&quot;, 0)
val valorString = sp1.getString(&quot;claveString&quot;, null)
val valorBoolean = sp1.getBoolean(&quot;claveBoolean&quot;, false)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Si no son demasiados valores y son básicamente pares de clave-valor, este será el método que utilizaremos.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="29"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="30"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="10"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="30"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="5"></unicode>
           <string role="key" value="_package"></string>
           <reference key="1"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:UA04.%20Comunicando...:4.4.%20Permanencia:4.4.1.%20SharedPreferences"></string>
           <string role="key" value="parent"></string>
           <reference key="27"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="33">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.4.2. Ficheros"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="31">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="32">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="856_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="31"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Si la App que planteamos hace que el uso de SharedPreferences no sea una solución, siempre podríamos escribir y leer de un archivo de disco. Será algo más tedioso, pero tendremos mayor libertad.&lt;/p&gt;
&lt;p&gt;Android usa un sistema de ficheros similar a los sistemas de ficheros de otras plataformas. Para trabajar con el sistema de ficheros de Android&lt;br&gt;usaremos la API &lt;strong&gt;java.io.*&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Se usarán ficheros para guardar e intercambiar información a través de la red, o para trabajar con recursos como imágenes, audio y video.&lt;/p&gt;
&lt;p&gt;Los sistemas Android siempre disponen de dos zonas de almacenamiento:&lt;/p&gt;
&lt;div class=&quot;exe-fx exe-accordion&quot;&gt;
&lt;h2&gt;Almacenamiento interno&lt;/h2&gt;
&lt;p&gt;Es un almacenamiento no volátil, inherente al propio dispositivo y, por tanto, siempre disponible. Los ficheros guardados aquí sólo son accesibles por la aplicación que, se mantendrán hasta su desinstalación.&lt;/p&gt;
&lt;p&gt;No es necesario ningún permiso para leer o escribir en la memoria interna si es en el directorio correspondiente a la aplicación.&lt;/p&gt;
&lt;p&gt;El método &lt;strong&gt;getFilesDir()&lt;/strong&gt; devuelve el directorio interno disponible para nuestra aplicación. Así, con la siguiente instrucción abriríamos un flujo de salida o de entrada según nos conveniese (&lt;strong&gt;FileOutputStream&lt;/strong&gt;, &lt;strong&gt;FileInputStream&lt;/strong&gt;).&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;File fich = new File(context.getFilesDir(), nombre_fichero);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;También podríamos haber utilizado &lt;strong&gt;openFileOutput&lt;/strong&gt; para obtener un &lt;strong&gt;FileOutputStream&lt;/strong&gt; que escribe en un fichero del directorio interno de nuestra aplicación.&lt;/p&gt;
&lt;p&gt;Si queremos usar ficheros temporales, nos podemos valer de &lt;strong&gt;getCacheDir()&lt;/strong&gt; para obtener nuestro directorio interno temporal y de &lt;strong&gt;createTempFile&lt;/strong&gt; para crear el fichero.&lt;/p&gt;
&lt;h2&gt;Almacenamiento externo&lt;/h2&gt;
&lt;p&gt;Se empezó a llamar así porque hacía referencia al almacenamiento en un medio extraíble (generalmente tarjeta SD).&lt;/p&gt;
&lt;p&gt;Por este motivo, debemos entender que no siempre puede estar disponible (el usuario puede montar la tarjeta SD como almacenamiento USB para otro dispositivo...)&lt;/p&gt;
&lt;p&gt;El acceso es practicamente global y todos pueden leer su contenido. Los permisos necesarios para su acceso son:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;WRITE_EXTERNAL_STORAGE&lt;/strong&gt; es el permiso que hay que solicitar en el AndroidManifest para poder escribir en la memoria externa.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;READ_EXTERNAL_STORAGE&lt;/strong&gt; es el permiso para leer de la memoria externa (aunque si se pide el permiso de escritura, implícitamente se tendrá permiso de lectura también).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cuando el usuario desinstala, los ficheros almacenados aquí sólo se eliminan si están guardados en el directorio proporcionado por&lt;br&gt;&lt;strong&gt;getExternalFilesDir()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Como la memoria externa puede no estar disponible, siempre hay que comprabar su disponibilidad antes de hacer uso de ella mediante el método &lt;strong&gt;getExternalStorageState():&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;si devuelve &lt;strong&gt;MEDIA_MOUNTED, &lt;/strong&gt;la podemos usar en escritura y lectura,&lt;/li&gt;
&lt;li&gt;si devuelve &lt;strong&gt;MEDIA_MOUNTED_READ_ONLY&lt;/strong&gt; sólo podemos leer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;getExternalStoragePublicDirectory&lt;/strong&gt; nos devuelve el directorio en el que podemos guardar datos que permanecerán aunque la aplicación se desinstale. Estos datos serán accesibles para otras aplicaciones (públicos).&lt;/p&gt;
&lt;p&gt;Al método anterior le pasamos una constante (p.ej: &lt;strong&gt;DIRECTORY_MUSIC&lt;/strong&gt;) para categorizar los datos a guardar.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;getExternalFilesDir&lt;/strong&gt; nos devuelve un directorio externo en el que podemos almacenar datos “privados”, que se borrarán al desinstalar la aplicación.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br&gt;El almacenamiento interno es la mejor opción cuando no queremos que otros usuarios o aplicaciones puedan acceder a los datos de nuestra aplicación.&lt;/p&gt;
&lt;p&gt;Usaremos el almacenamiento externo para guardar datos que queremos compartir con otras aplicaciones o que queremos que permanezcan aunque la aplicación se desinstale (por ej, un archivo de música editado por nuestra aplicación...)&lt;/p&gt;
&lt;p&gt;Por defecto las aplicaciones se instalan en el almacenamiento interno, pero este comportamiento se puede modificar con la propiedad &lt;strong&gt;android:installLocation&lt;/strong&gt; en nuestro &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;File dispone de los métodos &lt;strong&gt;getFreeSpace()&lt;/strong&gt; y &lt;strong&gt;getTotalSpace()&lt;/strong&gt; que nos indican respectivamente el espacio libre y el espacio total. Sin embargo, no tenemos garantizado poder escribir tantos bytes como nos devuelva &lt;strong&gt;getFreeSpace()&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;No estamos obligados a comprobar el espacio libre antes de escribir, podemos capturar una &lt;strong&gt;IOException&lt;/strong&gt; si no podemos escribir por falta de espacio (a veces no sabemos el tamaño de los datos a escribir...)&lt;/p&gt;
&lt;p&gt;Para eliminar ficheros, que ya no necesitemos, podemos utilizar el método &lt;strong&gt;delete()&lt;/strong&gt; de &lt;strong&gt;File&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;En el caso de tratarse de ficheros almacenados internamente, también podemos borrarlos llamando a: &lt;strong&gt;myContext.deleteFile(nombre_fichero)&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="32"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="33"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="11"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="33"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="34">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="35">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="859_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="34"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block js-hidden&quot;&gt;&lt;header class=&quot;exe-udlContent-header&quot;&gt;&lt;h2&gt;Ejemplo&lt;/h2&gt;&lt;/header&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class MainActivity : AppCompatActivity() {
    private val fichero:String=&quot;configuracion.txt&quot;
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        writeToFile(&quot;HOla Mundo&quot;)
        readFromFile()
    }

    private fun writeToFile(data: String) {
        try {
            val f = File(this.filesDir,fichero)
            val file = openFileOutput(fichero, Context.MODE_PRIVATE)
            Log.e(&quot;Espacio libre&quot;, f.totalSpace.toString())
            val outputStreamWriter = OutputStreamWriter(file)
            findViewById&amp;lt;TextView&amp;gt;(R.id.textoE1).text=&quot;Dir: &quot;+this.filesDir.toString()
            findViewById&amp;lt;TextView&amp;gt;(R.id.textoE2).text=&quot;Escrito: $data - &quot;+f.usableSpace.toString()
            outputStreamWriter.write(data)
            outputStreamWriter.close()
        }
        catch(e: IOException) {
            Log.e(&quot;Error&quot;, &quot;File write failed: &quot;, e)
        }
    }
    private fun readFromFile(): String? {
        val f = File(this.filesDir,fichero)
        var ret = &quot;&quot;
        try {
            val inputStream: InputStream? = openFileInput(fichero)
            if (inputStream != null) {
                val inputStreamReader = InputStreamReader(inputStream)
                val bufferedReader = BufferedReader(inputStreamReader)
                var receiveString: String? = &quot;&quot;
                val stringBuilder = StringBuilder()
                while (bufferedReader.readLine().also { receiveString = it } != null) {
                    stringBuilder.append(&quot;\n&quot;).append(receiveString)
                }
                inputStream.close()
                ret = stringBuilder.toString()
                findViewById&amp;lt;TextView&amp;gt;(R.id.textoL1).text=&quot;Leído : &quot;+ret+&quot; - &quot;+f.usableSpace.toString()
                f.delete()
                findViewById&amp;lt;TextView&amp;gt;(R.id.textoL2).text=&quot;Borrado : &quot;+f.usableSpace.toString()

            }
        }
        catch (e: FileNotFoundException) {
            Log.e(&quot;login activity&quot;, &quot;File not found: &quot;, e)
        }
        catch (e: IOException) {
            Log.e(&quot;login activity&quot;, &quot;Can not read file: &quot;, e)
        }
        return ret
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En la función de escritura, vemos cómo mediante el método &lt;strong&gt;openFileOutput&lt;/strong&gt; abrimos el archivo para &lt;strong&gt;escritura&lt;/strong&gt;. Luego utilizamos ese &lt;strong&gt;stream&lt;/strong&gt; para crear otro que nos permita escribir de forma cómoda nuestros datos, el &lt;strong&gt;OutputStreamWriter&lt;/strong&gt;. Basta llamar a &lt;strong&gt;write&lt;/strong&gt; con nuestros datos y luego a &lt;strong&gt;close&lt;/strong&gt; para dar por finalizada la sesión de escritura.&lt;/p&gt;
&lt;p&gt;El archivo contendrá nuestros datos. Ahora, para leerlos, utilizaremos el método &lt;strong&gt;openInputStream&lt;/strong&gt; para abrir el archivo en &lt;strong&gt;modo lectura&lt;/strong&gt;. El stream resultante lo usaremos para crear un &lt;strong&gt;InputStreamReader&lt;/strong&gt;, y luego un &lt;strong&gt;BufferedReader&lt;/strong&gt;, que nos facilita mucho las operaciones de lectura.&lt;/p&gt;
&lt;p&gt;Llamaremos al método &lt;strong&gt;readLine&lt;/strong&gt; una y otra vez hasta que no haya más líneas en el archivo. Cerraremos el archivo y devolvemos los datos.&lt;/p&gt;
&lt;p&gt;En este caso escribimos cadenas de caracteres, pero podríamos haber escrito cualquier otro dato. Vemos cómo Android nos facilita bastante cualquier tarea, solo es necesario conocer las clases adecuadas para cada necesidad.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="35"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="33"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="14"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="33"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="6"></unicode>
           <string role="key" value="_package"></string>
           <reference key="1"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:UA04.%20Comunicando...:4.4.%20Permanencia:4.4.2.%20Ficheros"></string>
           <string role="key" value="parent"></string>
           <reference key="27"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="38">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.4.3. Bases de datos"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="36">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="37">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="862_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="36"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Una base de datos o BBDD es un software que permite almacenar y recuperar datos mediante consultas inteligentes, manteniendo la coherencia entre las estructuras de datos. Existen principalmente dos tipos de BBDD: relacionales y no relacionales.&lt;/p&gt;
&lt;p&gt;Para la mayoría de los casos de uso, una BBDD relacional será idónea. Por ello, los sistemas operativos móviles tienen integrado software de gestión de bases de datos para que las aplicaciones puedan utilizarlas.&lt;/p&gt;
&lt;p&gt;Cuando creamos una base de datos desde nuestra aplicación, básicamente estamos creando un &lt;strong&gt;archivo&lt;/strong&gt; que el sistema guardará en la carpeta privada de la app, de la misma forma que con los archivos del almacenamiento interno. De este modo se mantiene la privacidad de los datos, pues el directorio de la aplicación &lt;strong&gt;no es accesible&lt;/strong&gt; para otros usuarios o aplicaciones.&lt;/p&gt;
&lt;p&gt;Desde las primeras versiones de iOS y Android, la mejor forma de mantener una base de datos local ha sido mediante &lt;strong&gt;SQLite&lt;/strong&gt;. Aunque existen muchos otros, el sistema de gestión de base de datos SQLite está escrito en C, por lo que es muy &lt;strong&gt;eficiente&lt;/strong&gt;, es &lt;strong&gt;simple&lt;/strong&gt; pero &lt;strong&gt;completo&lt;/strong&gt; y ocupa muy poco.&lt;/p&gt;
&lt;p&gt;Hoy en día sigue siendo el preferido y está preinstalado en el sistema. Sin embargo, debemos tener algunas consideraciones antes de usar &lt;strong&gt;SQLite&lt;/strong&gt; de forma directa, porque los sistemas relacionales como este tienen algunos inconvenientes. Su lenguaje de consulta, llamado SQL (Structured Query Language), es potente, pero nada tiene que ver con los lenguajes de programación orientados a objetos actuales, de modo que existe un desacople entre el código de la aplicación y el que entiende la base de datos.&lt;/p&gt;
&lt;p&gt;Para solucionar ese problema, podemos usar una librería &lt;strong&gt;ORM&lt;/strong&gt; (Object Relational Mapping) que traducirá de un lenguaje al otro dentro de la aplicación sin esfuerzo por nuestra parte. Existen muchas librerías que nos ayudan a usar SQLite, pero actualmente la preferida es &lt;strong&gt;Room&lt;/strong&gt;.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="37"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="38"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="15"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="38"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="39">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="40">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="863_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="39"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="anchors_linked_from_fields"></string>
                 <dictionary></dictionary>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;SQL es sencillo y potente, solo requiere algo de estudio y práctica. Sin embargo, como programadores, no seremos nosotros los que hablemos con la BBDD, será nuestra aplicación.&lt;/p&gt;
&lt;p&gt;Veamos entonces cómo podríamos crear y usar una base de datos &lt;strong&gt;SQLite&lt;/strong&gt; desde nuestra aplicación Android con las funciones integradas de bajo nivel, es decir, sin utilizar ningún &lt;strong&gt;ORM&lt;/strong&gt; como &lt;strong&gt;Room&lt;/strong&gt; que nos facilite las cosas.&lt;/p&gt;
&lt;div class=&quot;exe-fx exe-paginated&quot;&gt;
&lt;h2&gt;Las tablas&lt;/h2&gt;
&lt;p&gt;Imaginemos que nuestra aplicación es un videojuego y necesitamos guardar los datos de los usuarios y los puntos de cada partida. Con el DDL de SQL crearíamos dos tablas:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;CREATE TABLE jugadores (
    jugador_id INTEGER PRIMARY KEY,
    nombre TEXT NOT NULL UNIQUE,
    avatar TEXT,
    cinturon INTEGER,
);
CREATE TABLE partidas (
    partida_id INTEGER PRIMARY KEY,
    jugador_id INTEGER,
    fecha INTEGER,
    puntos INTEGER,
    nivel INTEGER
);&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La tabla &lt;strong&gt;jugadores&lt;/strong&gt; almacenará a los jugadores que han echado una partida hasta ahora. Sus campos serán:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;jugador_id&lt;/strong&gt;, un identificador único para identificar al jugador;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nombre&lt;/strong&gt;, que será el alias del jugador en la interfaz gráfica del juego;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;avatar&lt;/strong&gt;, que será una URL o ruta del sistema de archivos hacia una imagen que identifique gráficamente al jugador en el juego;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cinturon&lt;/strong&gt;, que no es más que el nivel que ha alcanzado el jugador en el juego por puntos o niveles superados.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Por otro lado, la tabla &lt;strong&gt;partidas&lt;/strong&gt; guardará los datos de todas las partidas jugadas por los diferentes jugadores, y sus campos serán:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;partida_id&lt;/strong&gt;, que es el identificador único de cada partida;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;jugador_id&lt;/strong&gt;, que identifica qué jugador en la partida;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;fecha&lt;/strong&gt; de la partida;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;puntos&lt;/strong&gt; conseguidos por el jugador en la partida;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nivel&lt;/strong&gt; máximo alcanzado en la partida.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Las consultas&lt;/h2&gt;
&lt;p&gt;Imaginemos que un nuevo jugador echa una partida: mediante el DML de SQL guardaríamos esa nueva información:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;INSERT INTO jugadores (jugador_id, nombre, avatar, cinturon) VALUES (69, “Ninja Rookie”, “http://img.com/ninja”, 0)
INSERT INTO partidas (partida_id, jugador_id, fecha, puntos, nivel) VALUES (3, 69, strftime('%s','now'), 30, 2)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Con el comando &lt;strong&gt;INSERT INTO&lt;/strong&gt; introducimos los datos del jugador &lt;strong&gt;Ninja Rookie&lt;/strong&gt; con el código &lt;strong&gt;identificador 69&lt;/strong&gt; en la tabla &lt;strong&gt;jugadores&lt;/strong&gt;, y la partida que ha jugado con el &lt;strong&gt;identificador 3&lt;/strong&gt; y los &lt;strong&gt;30&lt;/strong&gt; &lt;strong&gt;puntos&lt;/strong&gt; obtenidos hasta el &lt;strong&gt;nivel 2&lt;/strong&gt; del juego se guardan en partidas.&lt;/p&gt;
&lt;p&gt;Como SQLite no tiene un tipo de datos para fechas, usaremos un número entero, como el número de segundos desde 1970, una forma clásica de contar el tiempo en computación (&lt;a href=&quot;https://es.wikipedia.org/wiki/Tiempo_Unix&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;timestamp&lt;/strong&gt;&lt;/a&gt;). De ahí la función &lt;strong&gt;strftime&lt;/strong&gt;, que convierte la fecha &lt;strong&gt;now&lt;/strong&gt; a segundos &lt;strong&gt;%s&lt;/strong&gt; y lo pasa a entero. Cuando después quisiéramos recuperar los datos del jugador 69, haríamos la consulta:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT * FROM jugadores WHERE jugador_id = 69&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Y si quisiéramos recuperar todas las partidas del jugador 69 haríamos:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;SELECT * FROM partidas WHERE jugador_id = 69&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;Estructuramos en Android&lt;/h2&gt;
&lt;p&gt;Lo primero es definir las estructuras que almacenarán nuestros datos, las tablas. Para ello heredamos de la clase &lt;strong&gt;SQLiteOpenHelper&lt;/strong&gt;, que será la responsable de mantener esas&lt;br&gt;estructuras en el archivo de base de datos:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class JuegoDbHelper(context: Context) : SQLiteOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION) {
    ....
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Como vemos, necesita un contexto, el nombre del archivo donde se almacenará la BBDD y la versión actual, que como en nuestro caso será la primera, podríamos definir como 1.&lt;/p&gt;
&lt;p&gt;Después sobrescribimos la función &lt;strong&gt;onCreate&lt;/strong&gt; para definir las tablas que darán forma a nuestra base de datos:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;override fun onCreate(db: SQLiteDatabase) {
    db.execSQL(SQL_CREATE_JUGADORES)
    db.execSQL(SQL_CREATE_PARTIDAS)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Se nos pasa un objeto &lt;strong&gt;db&lt;/strong&gt; de base de datos y llamamos a su &lt;strong&gt;execSQL&lt;/strong&gt;, una función que ejecutará el código SQL que se le pase.&lt;/p&gt;
&lt;p&gt;Las constantes string &lt;strong&gt;SQL_CREATE_JUGADORES &lt;/strong&gt;y &lt;strong&gt;SQL_CREATE_PARTIDAS&lt;/strong&gt; que más tarde mostraremos son el código SQL para crear las tablas que deseamos. Si mientras creamos la BBDD desde nuestra aplicación resulta que ya existía otra con una versión anterior, se llamará a &lt;strong&gt;onUpdate&lt;/strong&gt;, que será la encargada de actualizar los datos antiguos a la nueva estructura:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {
    db.execSQL(SQL_DELETE_JUGADORES)
    db.execSQL(SQL_DELETE_PARTIDAS)
    onCreate(db)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Para no complicar el código, y puesto que solo tenemos una versión de nuestras tablas, hacemos lo más sencillo, que es eliminar las tablas antiguas y volverlas a crear con la nueva estructura, sin tener en cuenta que perderemos los datos de la versión previa en caso de que los hubiera. El código completo sería:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-sql&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;import android.content.Context
import android.database.sqlite.SQLiteDatabase
import android.database.sqlite.SQLiteOpenHelper
class JuegoDbHelper(context: Context) : SQLiteOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION) {
    // Se llama cuando la base de datos aun no existe y debe crearse
    override fun onCreate(db: SQLiteDatabase) {
        // Ejecutamos el SQL que crea las tablas
        db.execSQL(SQL_CREATE_JUGADORES)
        db.execSQL(SQL_CREATE_PARTIDAS)
    }
    // Se llama cuando hemos modificado la estructura de las tablas
    // y hemos incrementado el número de la versión pero aún tenemos
    // una BBDD antigua con una versión anterior, aquí se actualizará
    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {
        // Ejecutamos el SQL que borra las tablas,
        // después el que las crea con la nueva versión
        db.execSQL(SQL_DELETE_JUGADORES)
        db.execSQL(SQL_DELETE_PARTIDAS)
        onCreate(db)
    }
    companion object {
        // Si necesitamos cambiar las tablas una vez que la
        // app está en producción, debemos incrementar este numero
        const val DATABASE_VERSION = 1
        const val DATABASE_NAME = &quot;juego.db&quot;
        const val TABLE_JUGADORES = &quot;jugadores&quot;
        private const val SQL_CREATE_JUGADORES = 
            &quot;CREATE TABLE $TABLE_JUGADORES (&quot; + 
            &quot;jugador_id INTEGER PRIMARY KEY,&quot; + 
            &quot;nombre TEXT NOT NULL UNIQUE,&quot; + 
            &quot;avatar TEXT,&quot; + 
            &quot;cinturon INTEGER&quot;
        private const val SQL_DELETE_JUGADORES = &quot;DROP TABLE IF EXISTS $TABLE_JUGADORES&quot;
        const val TABLE_PARTIDAS = &quot;partidas&quot;
        private const val SQL_CREATE_PARTIDAS = 
            &quot;CREATE TABLE $TABLE_PARTIDAS (&quot; + 
            &quot;partida_id INTEGER PRIMARY KEY,&quot; + 
            &quot;jugador_id INTEGER NOT NULL,&quot; + 
            &quot;fecha INTEGER NOT NULL,&quot; + 
            &quot;puntos INTEGER NOT NULL,&quot; + 
            &quot;nivel INTEGER NOT NULL&quot;
        private const val SQL_DELETE_PARTIDAS = &quot;DROP TABLE IF EXISTS $TABLE_PARTIDAS&quot;
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;Introducir datos&lt;/h2&gt;
&lt;p&gt;Hemos definido los comandos SQL como constantes string para tenerlos bien definidos solo en un lugar y no desperdigados por el código. Ahora podríamos introducir datos en nuestra nueva base de datos. Como programamos con Kotlin, nuestros datos serán objetos de alguna clase. Definamos nuestra clase Jugador, asociada a la tabla jugadores:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;data class jugador(
    val id: Int,
    val nombre: String,
    val avatar: String?,
    val cinturon: Int?)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Nada más que un data class de Kotlin con los campos de nuestro jugador. Añadamos una función a la clase para insertar el propio objeto en la BBDD:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;fun introducirEnBBDD(db: SQLiteDatabase) {
    // Juntamos todos los campos en una colección ContentValues
    val values = ContentValues().apply {
        put(&quot;nombre&quot;, jugador.nombre)
        put(&quot;avatar&quot;, jugador.avatar)
        put(&quot;cinturon&quot;, jugador.cinturon)
    }
    // Insertamos la fila de datos, y el sistema devuelve el id
    id = db?.insert(JuegoDbHelper.TABLE_JUGADORES, null, values)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Esta nueva función &lt;strong&gt;introducirEnBBDD&lt;/strong&gt; recibe por parámetro un objeto &lt;strong&gt;SQLiteDatabase&lt;/strong&gt; que crearemos mediante nuestro &lt;strong&gt;JuegoDbHelper&lt;/strong&gt;. Este objeto de base de datos nos permite insertar, seleccionar, actualizar y borrar. Introducimos los datos en un objeto &lt;strong&gt;ContentValues&lt;/strong&gt;, que no es más que un objeto contenedor de pares clave-valor, y lamamos a la función &lt;strong&gt;insert&lt;/strong&gt;, que devolverá el identificador de la fila insertada en la tabla. Para introducir un &lt;strong&gt;nuevo jugador&lt;/strong&gt;, el código sería:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val dbHelper = JuegoDbHelper(context)
val db = dbHelper.writableDatabase //Creamos base de datos en modo escritura
val jugador = Jugador(69, &quot;Ninja Rookie&quot;, &quot;http://img.com/ninja.png&quot;, 0)
jugador.insertarEnBBDD(db)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Primero creamos nuestra clase de ayuda para BBDD. Con ese objeto creamos nuestra base de datos db. Luego creamos el &lt;strong&gt;Jugador&lt;/strong&gt;, y llamamos a su método insertarEnBBDD con el objeto &lt;strong&gt;db&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Conclusión&lt;/h2&gt;
&lt;p&gt;Utilizar las funciones de bajo nivel para manejar nuestra base de datos es posible, pero tiene ciertos inconvenientes e incomodidades:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;requiere mucho código para cada tabla.&lt;/li&gt;
&lt;li&gt;Pasar un objeto de Kotlin a una fila de base de datos SQL es incómodo y repetitivo, entre otras cosas porque para cada acción de BBDD necesitamos desgranar los campos del objeto en pares clave-valor.&lt;/li&gt;
&lt;li&gt;Necesitamos conocer el lenguaje SQL para definir las tablas y sus relaciones, y para codificar las consultas de selección, actualización y borrado.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Room&lt;/h2&gt;
&lt;p&gt;Room, una librería con la que crear y acceder a los datos de nuestra BBDD SQLite de forma fácil, eficiente y orientada a objetos. Veamos cómo utilizar este ORM.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="40"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="38"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="16"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="38"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="7"></unicode>
           <string role="key" value="_package"></string>
           <reference key="1"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:UA04.%20Comunicando...:4.4.%20Permanencia:4.4.3.%20Bases%20de%20datos"></string>
           <string role="key" value="parent"></string>
           <reference key="27"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
         <instance class="exe.engine.node.Node" reference="43">
          <dictionary>
           <string role="key" value="_title"></string>
           <unicode value="4.4.4. Room"></unicode>
           <string role="key" value="idevices"></string>
           <list>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="41">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="42">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="865_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="41"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Room es un ORM (Object- Relational mapping) que nos permitirá trabajar de una forma más sencilla con bases de datos SQL.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;resources/room_architecture.png&quot; alt=&quot;Room Architecture&quot; style=&quot;display: block; margin-left: auto; margin-right: auto;&quot; width=&quot;560&quot; height=&quot;506&quot;&gt;&lt;/p&gt;
&lt;p&gt;La imagen anterior nos muestra el funcionamiento de dicha herramienta que, aunque parezca complicado al principio, es muy fácil de entender cuando nos pongamos a ello.&amp;nbsp;&lt;br&gt;Tendremos una base de datos que le devolverá a nuestra app los &lt;strong&gt;Data Access Objects&lt;/strong&gt; (DAO) estos son los encargados de persistir la información en la base de datos y de devolvernos las &lt;strong&gt;entities&lt;/strong&gt;, que serán las encargadas de devolvernos la información que hemos ido almacenando.&lt;/p&gt;
&lt;p&gt;Necesitas incluir el plugin kotlin-kapt y las dos siguientes dependencias:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;id 'kotlin-kapt'

implementation 'androidx.recyclerview:recyclerview:1.2.1'
implementation 'androidx.room:room-ktx:2.4.3'
kapt 'androidx.room:room-compiler:2.4.3'&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;exe-fx exe-accordion&quot;&gt;
&lt;h2&gt;Entidades&lt;/h2&gt;
&lt;p&gt;En Room, cada entidad (&lt;a href=&quot;https://developer.android.com/training/data-storage/room/defining-data&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;Entity&lt;/strong&gt;&lt;/a&gt;) representa una tabla debe ser una clase. En nuestro caso, vamos a definir una tabla que nos permita almacenar los datos de un disco de música. En concreto, vamos a crear una clase llamada&lt;strong&gt; TaskEntity&lt;/strong&gt; Y la anotaremos con &lt;strong&gt;@Entity&lt;/strong&gt;.&amp;nbsp;&lt;br&gt;Las anotaciones convierten clases normales en elementos interpretables por &lt;strong&gt;Room&lt;/strong&gt;. Habrá que utilizarlas continuamente para configurar la base de datos y conseguir una estructura y propiedades a nuestro gusto.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Entity(tableName = &quot;task_entity&quot;)
data class TaskEntity (
        @PrimaryKey(autoGenerate = true)
        var id:Int = 0,
        var name:String = &quot;&quot;,
        var isDone:Boolean = false
)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;La anotación &lt;strong&gt;@Entity&lt;/strong&gt; la utilizamos para añadirle un nombre a nuestra entidad como tabla de la base de datos. Cada base de datos puede contener una o varias tablas y cada una persiste un modelo diferente.&lt;/p&gt;
&lt;p&gt;La anotación &lt;strong&gt;@PrimaryKey (autoGenerate = true)&lt;/strong&gt; está diciendo que la variable &lt;strong&gt;id&lt;/strong&gt; es un valor que se autogenera al crear un objeto de esta clase y que no podrá repetirse. Es un valor único con el cual podremos localizar un objeto concreto.&lt;/p&gt;
&lt;h2&gt;DAOs&lt;/h2&gt;
&lt;p&gt;También necesitaremos una &lt;strong&gt;interface DAO&lt;/strong&gt; (Data Access Object), que será la que nos permita acceder a la tabla, &lt;strong&gt;hay que crear una por cada entidad&lt;/strong&gt;. En nuestro caso, esta clase será &lt;strong&gt;TaskDao.kt&lt;/strong&gt; &amp;nbsp;y la anotaremos con &lt;strong&gt;@Dao&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Los objetos DAO facilitan mucho el acceso a la BD. Aquí se declararán los métodos que interactuarán con las tablas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;@Query&lt;/strong&gt;: Se hacen consultas directamente a la base de datos usando SQL. En este ejemplo haremos dos muy sencillas, pero se pueden hacer cosas impresionantes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;@Insert&lt;/strong&gt;: Se usará para insertar entidades a la base de datos, a diferencia de las &lt;strong&gt;@Query&lt;/strong&gt;&amp;nbsp;no hay que hacer ningún tipo de consulta, sino pasar el objeto a insertar.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;@Update&lt;/strong&gt;: Actualizan una entidad ya insertada. Solo tendremos que pasar ese objeto modificado y ya se encarga de actualizarlo. ¿Cómo sabe que objeto hay que modificar? Pues por nuestro &lt;strong&gt;id&lt;/strong&gt;, la &lt;strong&gt;PrimaryKey&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;@Delete&lt;/strong&gt;:&amp;nbsp;Como su propio nombre indica borra de la tabla un objeto que le pasemos.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Dao
interface TaskDao {
    @Query(&quot;SELECT * FROM task_entity&quot;)
    fun getAllTasks(): &lt;a href=&quot;https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MutableList&lt;/a&gt;&lt;taskentity&gt;&lt;br&gt;&amp;nbsp;   @Insert&lt;br&gt;    ...&lt;br&gt;    @Update&lt;br&gt;    ...&lt;br&gt;    @Delete&lt;br&gt;    ...
}&lt;/taskentity&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Android Studio permite &lt;strong&gt;autocompletar&lt;/strong&gt; y hacer validaciones sencillas de las queries que definamos.&lt;/p&gt;
&lt;p&gt;A las consultas también podemos pasarles argumentos. Sólo hay que indicar el argumento en la función:&amp;nbsp; &lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Query(&quot;SELECT * FROM task_entity WHERE id = :id&quot;)
fun findById(id: Int): TaskEntity&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Gracias a &lt;strong&gt;onConflict&lt;/strong&gt;, podemos definir la estrategia de inserción si hubiera conflictos: &lt;strong&gt;IGNORE&lt;/strong&gt;, &lt;strong&gt;ABORT&lt;/strong&gt; o &lt;strong&gt;REPLACE:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Insert(onConflict = OnConflictStrategy.IGNORE)
fun insert(tasks: List&amp;lt;TaskEntity&amp;gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;Base de datos&lt;/h2&gt;
&lt;p&gt;Por último, definiremos una clase que nos permitirá la creación de la base de datos como tal. Para ello crearemos el archivo &lt;strong&gt;TaskDatabase.kt&lt;/strong&gt; y usaremos la anotación &lt;strong&gt;@Database&lt;/strong&gt; .&lt;/p&gt;
&lt;p&gt;Lo recomendado es que esta clase siga un patrón &lt;strong&gt;singleton&lt;/strong&gt;. Aquí es donde se indicarán las entidades que formaran la base de datos, la forma de crearla/destruirla, la versión, etc.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Database(entities = arrayOf(TaskEntity::class), version = 1)
    abstract class TasksDatabase : RoomDatabase() {
    abstract fun taskDao(): TaskDao
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Lo primero que debemos fijarnos es en la anotación &lt;strong&gt;@Database&lt;/strong&gt;, que especifica que la entidad será una lista de &lt;strong&gt;TaskEntity&lt;/strong&gt; (entidad que ya hemos creado) y que la &lt;a href=&quot;#t948b25f9-d7ec-5fa8-7dc4-1191dd0fa660&quot; id=&quot;link948b25f9-d7ec-5fa8-7dc4-1191dd0fa660&quot; class=&quot;exe-tooltip definition-tt titled-tt&quot; title=&quot;Versiones | Versiones&quot;&gt;versión es 1&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;La clase extendida &lt;strong&gt;RoomDatabase()&lt;/strong&gt;, es una clase que tenemos gracias a importar la dependencia de &lt;strong&gt;Room&lt;/strong&gt; en nuestro &lt;strong&gt;gradle&lt;/strong&gt;. Para finalizar tiene una sola función que hace referencia al &lt;strong&gt;Dao&lt;/strong&gt; que hemos creado anteriormente, si tuviésemos más Dao’s pues habría que implementarlos ahí también.&lt;/p&gt;
&lt;p&gt;Para crear la instancia de Room, en el &lt;strong&gt;Application&lt;/strong&gt; por ejemplo:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val room: TasksDatabase = Room
.databaseBuilder(this, TasksDatabase::class.java, &quot;tasks&quot;)
.build()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Y para usarlo:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;val tasks = room.TaskDao().getAll()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;MisNotasApp&lt;/h2&gt;
&lt;p&gt;Ahora vamos a crear una clase algo diferente. Esta clase va a extender de &lt;strong&gt;Application()&lt;/strong&gt; y eso significa que será lo primero en ejecutarse al abrirse la aplicación.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class MisNotasApp: Application() {
    companion object {
        lateinit var database: TasksDatabase
    }
    override fun onCreate() {
        super.onCreate()
        MisNotasApp.database =  Room.databaseBuilder(this, TasksDatabase::class.java, &quot;tasks-db&quot;).build()
    }
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aquí, la instancia de &lt;strong&gt;database&lt;/strong&gt; necesitará tres parámetros, el &lt;strong&gt;contexto&lt;/strong&gt; (&lt;strong&gt;this&lt;/strong&gt;), la clase de nuestra base de datos (&lt;strong&gt;TasksDatabase&lt;/strong&gt;) y el nombre que le pondremos, en este caso, &lt;strong&gt;&quot;tasks-db&quot;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Para que esta clase se lance al abrir la app debemos ir al &lt;strong&gt;AndroidManifest.xml&lt;/strong&gt; y añadir&amp;nbsp;&lt;strong&gt;android:name=&quot;.MisNotasApp&quot;&lt;/strong&gt; dentro de la etiqueta &lt;strong&gt;&lt;application&gt;&lt;/application&gt;&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;activity_main&lt;/h2&gt;
&lt;p&gt;Aunque tengamos varias clases por detrás, nuestra app solo tendrá un &lt;strong&gt;layout&lt;/strong&gt;, una sola vista. La idea es crear algo sencillo y usable, por lo que me contaremos con una barra superior donde añadir las tareas y luego un &lt;strong&gt;RecyclerView&lt;/strong&gt; donde se muestren todas.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-markup&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@android:color/background_light&quot;
    tools:context=&quot;com.cursokotlin.misnotas.UI.MainActivity&quot;&amp;gt;
    &amp;lt;android.support.v7.widget.RecyclerView
        android:id=&quot;@+id/rvTask&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_below=&quot;@+id/rlAddTask&quot;/&amp;gt;
    &amp;lt;RelativeLayout
        android:id=&quot;@+id/rlAddTask&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:elevation=&quot;10dp&quot;
        android:layout_margin=&quot;10dp&quot;
        android:background=&quot;@android:color/white&quot;&amp;gt;
        &amp;lt;EditText
            android:id=&quot;@+id/etTask&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:hint=&quot;añade una tarea&quot;
            android:layout_alignParentLeft=&quot;true&quot;
            android:layout_toLeftOf=&quot;@+id/btnAddTask&quot;
            /&amp;gt;
        &amp;lt;Button
            android:id=&quot;@+id/btnAddTask&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:layout_alignParentRight=&quot;true&quot;
            android:text=&quot;Añadir&quot;/&amp;gt;
    &amp;lt;/RelativeLayout&amp;gt;
&amp;lt;/RelativeLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;MainActivity&lt;/h2&gt;
&lt;p&gt;Con la vista preparada, es el momento de empezar a generar la lógica. Empezamos creando las variables necesarias.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;lateinit var recyclerView: RecyclerView
lateinit var tasks: MutableList&amp;lt;TaskEntity&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Ahora nos vamos al &lt;strong&gt;OnCreate&lt;/strong&gt; de nuestra actividad, lo primero que haremos será instanciar tasks&amp;nbsp;como una &lt;strong&gt;arrayList&lt;/strong&gt; y acto seguido llamaremos a la función &lt;strong&gt;getTasks()&lt;/strong&gt; que vamos a crear. Esta función será la encargada de acceder a nuestro &lt;strong&gt;DAO&lt;/strong&gt; para hacer la primera consulta, recuperar todas las entidades que el usuario tenga guardadas. Así que por ahora dejamos el &lt;strong&gt;OnCreate&lt;/strong&gt; así.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
    tasks = ArrayList()
    getTasks()
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Con lo realizado hasta ahora, ya tendríamos suficiente para crear y manejar la base de datos. De entre las posibles complicaciones que nos podemos encontrar en este primer contacto con Room, solo hay que tener una cosa importante en cuenta: &lt;strong&gt;las operaciones de acceso a la base de datos no pueden realizarse en el hilo principal de la app&lt;/strong&gt;. Si hacemos esto, la app se cerrará abruptamente.&lt;/p&gt;
&lt;p&gt;Tendremos que detenernos para conocer un poco el uso de los &lt;strong&gt;hilos&lt;/strong&gt;. Los hilos son los que permiten la multitarea de un dispositivo, por ejemplo en un hilo puedes ir guardando información asíncronamente (por detrás) mientras el usuario sigue haciendo cosas.&lt;/p&gt;
&lt;p&gt;En Android, el &lt;strong&gt;hilo principal&lt;/strong&gt; es el encargado de la parte visual de la aplicación, por lo que &lt;strong&gt;no nos deja acceder a la base de datos&lt;/strong&gt; desde ahí, por ello crearemos un &lt;strong&gt;hilo secundario&lt;/strong&gt; que de modo &lt;strong&gt;asíncrono&lt;/strong&gt; hará la petición a la base de datos y recuperará la información que necesitemos.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&quot;t948b25f9-d7ec-5fa8-7dc4-1191dd0fa660&quot; class=&quot;exe-tooltip-text&quot;&gt;
&lt;p&gt;Las versiones se usan para la posible migración de datos al actualizar la App. Imaginemos que sacamos una segunda versión de la app y en vez de 3 parámetros almacenamos 4, no podemos cambiar nuestra entidad de golpe pues habría problemas. Para eso se usa la versión, junto a un fichero de migración que le dice al programa que deberá hacer para pasar de la versión 1 a la 2, 3 o la que sea.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list>
                    <instance class="exe.engine.galleryidevice.GalleryImage">
                     <dictionary>
                      <string role="key" value="_caption"></string>
                      <instance class="exe.engine.field.TextField">
                       <dictionary>
                        <string role="key" value="_id"></string>
                        <int value="149517"></int>
                        <string role="key" value="_idevice"></string>
                        <none></none>
                        <string role="key" value="_instruc"></string>
                        <string value=""></string>
                        <string role="key" value="_name"></string>
                        <string value=""></string>
                        <string role="key" value="content"></string>
                        <string value=""></string>
                        <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                        <int value="4"></int>
                       </dictionary>
                      </instance>
                      <string role="key" value="_id"></string>
                      <unicode value="18_865_2.0"></unicode>
                      <string role="key" value="_imageResource"></string>
                      <instance class="exe.engine.resource.Resource" reference="44">
                       <dictionary>
                        <string role="key" value="_idevice"></string>
                        <reference key="41"></reference>
                        <string role="key" value="_package"></string>
                        <reference key="1"></reference>
                        <string role="key" value="_storageName"></string>
                        <string value="room_architecture.png"></string>
                        <string role="key" value="_userName"></string>
                        <string value="c:\\users\\david\\appdata\\local\\temp\\tmpglioux.eXe\\previews\\allyourbase\\room_architecture.png"></string>
                        <string role="key" value="checksum"></string>
                        <string value="9cf2e9f17b01edee76f5ff365e075dc8"></string>
                        <string role="key" value="exe.engine.resource.Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="exe.engine.resource._Resource.persistenceVersion"></string>
                        <int value="2"></int>
                        <string role="key" value="warningMsg"></string>
                        <string value=""></string>
                       </dictionary>
                      </instance>
                      <string role="key" value="_parent"></string>
                      <reference key="42"></reference>
                      <string role="key" value="_thumbnailResource"></string>
                      <none></none>
                      <string role="key" value="exe.engine.galleryidevice.GalleryImage.persistenceVersion"></string>
                      <int value="3"></int>
                      <string role="key" value="makeThumbnail"></string>
                      <bool value="0"></bool>
                     </dictionary>
                    </instance>
                   </list>
                   <string role="key" value="idevice"></string>
                   <reference key="42"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="1"></int>
                 <string role="key" value="parentNode"></string>
                 <reference key="43"></reference>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="18"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="43"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list>
               <reference key="44"></reference>
              </list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="45">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value=""></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="0"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="46">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="866_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="45"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-expression&quot;&gt;&lt;section class=&quot;exe-udlContent-block js-hidden&quot;&gt;&lt;header class=&quot;exe-udlContent-header&quot;&gt;&lt;h2&gt;Corrutinas&lt;/h2&gt;&lt;/header&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Todas estas operaciones de base de datos deberían hacerse fuera del hilo principal. Esto se puede realizar manualmente, o usar alguna de las integraciones que ya se nos dan implementadas.&lt;/p&gt;
&lt;p&gt;Lo único que necesitamos es añadir la palabra &lt;strong&gt;suspend&lt;/strong&gt; delante de las funciones del DAO, ¡y listo!&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Query(&quot;SELECT * from task_entity&quot;)
suspend fun getAll(): List&lt;taskentity&gt;

&lt;/taskentity&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el &lt;strong&gt;MainActivity&lt;/strong&gt;, creamos el método &lt;strong&gt;getTasks()&lt;/strong&gt; como corrutina de la siguiente manera:&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;fun getTasks()= runBlocking{
        launch {
            tasks = MisNotasApp.database.taskDao().getAllTasks()
            setUpRecyclerView(tasks)
        }
    }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section class=&quot;exe-udlContent-block js-hidden&quot;&gt;&lt;header class=&quot;exe-udlContent-header&quot;&gt;&lt;h2&gt;TaskAdapter&lt;/h2&gt;&lt;/header&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Antes de continuar, vamos a crear un nuevo layout llamado &lt;strong&gt;item_task.xml&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;
&amp;lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:orientation=&quot;horizontal&quot;
    android:layout_margin=&quot;10dp&quot;&amp;gt;
    &amp;lt;CheckBox
        android:id=&quot;@+id/cbIsDone&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginRight=&quot;10dp&quot;
        android:layout_marginEnd=&quot;10dp&quot; /&amp;gt;
    &amp;lt;TextView
        android:id=&quot;@+id/tvTask&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:textStyle=&quot;bold&quot;
        android:textSize=&quot;18sp&quot;
        tools:text=&quot;Test&quot;/&amp;gt;
&amp;lt;/LinearLayout&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;resources/checkBoxEjemplo.png&quot; alt=&quot;Checkbox&quot; style=&quot;float: left; margin: 10px;&quot; width=&quot;242&quot; height=&quot;34&quot;&gt;Nos quedará una celda muy sencilla. La idea es que cuando pulsemos el &lt;strong&gt;Checkbox,&lt;/strong&gt; se actualice en la base de datos el objeto y, si hacemos click en cualquier otra parte de la vista, se borre de la base de datos.&lt;/p&gt;
&lt;p&gt;Crearemos una nueva clase, &lt;strong&gt;TaskAdapter&lt;/strong&gt;, a la que le pasaremos 3 parámetros: la lista de tareas que tenemos almacenadas en nuestra base de datos y funciones. Estas funciones nos permitirán recuperar el evento del click en cada una de las celdas, ya sea la vista completa o un componente concreto.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class TasksAdapter(
val tasks: List&lt;taskentity&gt;,
val checkTask: (TaskEntity) -&amp;gt; Unit,
val deleteTask: (TaskEntity) -&amp;gt; Unit) : RecyclerView.Adapter&lt;tasksadapter.viewholder&gt;() {&lt;/tasksadapter.viewholder&gt;&lt;/taskentity&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el&amp;nbsp;&lt;strong&gt;onBindViewHolder &lt;/strong&gt;añadimos el&amp;nbsp;&lt;strong&gt;setOnClickListener&lt;/strong&gt; a cada uno de los componentes que nos interese, en este caso se ha puesto al &lt;strong&gt;checkbox&lt;/strong&gt; y, para controlar el click en cualquier otra parte de la vista, podemos acceder a&amp;nbsp;&lt;strong&gt;itemView&amp;nbsp;&lt;/strong&gt;que nos devuelve la celda completa.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;override fun onBindViewHolder(holder: ViewHolder, position: Int) {
    val item = tasks[position]
    holder.bind(item, checkTask, deleteTask)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Y ya completamos &lt;strong&gt;TaskAdapter&lt;/strong&gt; con los dos métodos que nos faltan&amp;nbsp;&lt;strong&gt;onCreateViewHolder&amp;nbsp;&lt;/strong&gt;y&amp;nbsp;&lt;strong&gt;getItemCount&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
    val layoutInflater = LayoutInflater.from(parent.context)
    return ViewHolder(layoutInflater.inflate(R.layout.item_task, parent, false))
}&lt;br&gt;override fun getItemCount(): Int {&lt;br&gt;return tasks.size&lt;br&gt;}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Para finalizar, añadimos la clase &lt;strong&gt;ViewHolder&lt;/strong&gt; que solo tendrá de novedad en la función &lt;strong&gt;bind&lt;/strong&gt; donde, a través de&amp;nbsp;&lt;strong&gt;.isChecked,&lt;/strong&gt; podemos iniciar la vista con el &lt;strong&gt;checkbox&lt;/strong&gt; marcado o no, así que comprobaremos si está a &lt;strong&gt;true&lt;/strong&gt; nuestra entidad y si es así pues lo marcamos.&lt;/p&gt;
&lt;p&gt;Una vez configurada la celda, le añadimos&amp;nbsp;&lt;strong&gt;.setOnClickListener&lt;/strong&gt; a nuestro &lt;strong&gt;checkBox&lt;/strong&gt; y al&amp;nbsp;&lt;strong&gt;itemView&lt;/strong&gt; que es el componente completo pasando el propio objeto.&amp;nbsp;&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {
    val tvTask = view.findViewById&lt;textview&gt;(R.id.tvTask)
    val cbIsDone = view.findViewById&lt;checkbox&gt;(R.id.cbIsDone)
 
    fun bind(task: TaskEntity, checkTask: (TaskEntity) -&amp;gt; Unit, deleteTask: (TaskEntity) -&amp;gt; Unit) {
        tvTask.text = task.name
        cbIsDone.isChecked = task.isDone
        cbIsDone.setOnClickListener{checkTask(task)}
        itemView.setOnClickListener { deleteTask(task) }
    }
}&lt;/checkbox&gt;&lt;/textview&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;section class=&quot;exe-udlContent-block js-hidden&quot;&gt;&lt;header class=&quot;exe-udlContent-header&quot;&gt;&lt;h2&gt;Volvemos a MainActivity&lt;/h2&gt;&lt;/header&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Con nuestro adapter completo es el paso de configurarlo desde &lt;strong&gt;MainActivity&lt;/strong&gt; con nuestra función&amp;nbsp;&lt;strong&gt;setUpRecyclerView()&lt;/strong&gt;&amp;nbsp;a la cual le pasaremos la lista de tareas que hemos recuperado.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;fun setUpRecyclerView(tasks: List&lt;taskentity&gt;) {
    adapter = TasksAdapter(tasks, { updateTask(it) }, {deleteTask(it)})
    recyclerView = findViewById(R.id.rvTask)
    recyclerView.setHasFixedSize(true)
    recyclerView.layoutManager = LinearLayoutManager(this)
    recyclerView.adapter = adapter
}&lt;/taskentity&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Debemos fijarnos que al instanciar el adapter le pasamos tres parámetros:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;nbsp;lista de tareas,&amp;nbsp;&lt;/li&gt;
&lt;li&gt;updateTask(it)&lt;/li&gt;
&lt;li&gt;deleteTask(it).&amp;nbsp;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Estos no son parámetros sino métodos que tendremos en el &lt;strong&gt;MainActivity&lt;/strong&gt;, que serán llamados automáticamente cuando se ejecute el evento del click que configuramos en el adapter.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;fun updateTask(task: TaskEntity) =runBlocking {
      launch {
         task.isDone = !task.isDone
         MisNotasApp.database.taskDao().updateTask(task)
       }
   }&lt;br&gt;fun deleteTask(task: TaskEntity)=runBlocking{&lt;br&gt;     launch{&lt;br&gt;         val position = tasks.indexOf(task)&lt;br&gt;         MisNotasApp.database.taskDao().deleteTask(task)&lt;br&gt;        tasks.remove(task)&lt;br&gt;        adapter.notifyItemRemoved(position)&lt;br&gt;    }&lt;br&gt;}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;En el método&amp;nbsp;&lt;strong&gt;deleteTask()&amp;nbsp;&lt;/strong&gt;debemos hacer algo más, para empezar, buscaremos en nuestra lista&amp;nbsp;&lt;strong&gt;tasks&lt;/strong&gt; la posición del item que vamos a borrar para tener una referencia. Para ello usaremos la función de las listas&amp;nbsp;&lt;strong&gt;indexOf(item)&lt;/strong&gt; que nos devolverá dicha posición y la almacenamos en una variable, luego borraremos el objeto de la base de datos y de nuestra lista y acabaremos en el hilo principal avisando al adapter que hemos removido un objeto, pasándole la posición.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="46"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <none></none>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="19"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="43"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
            <instance class="exe.engine.jsidevice.JsIdevice" reference="47">
             <dictionary>
              <string role="key" value="_title"></string>
              <unicode value="Últimos retoques"></unicode>
              <string role="key" value="_attributes"></string>
              <list>
               <tuple>
                <string value="title"></string>
                <list>
                 <string value="Title"></string>
                 <int value="0"></int>
                 <int value="0"></int>
                </list>
               </tuple>
               <tuple>
                <string value="category"></string>
                <list>
                 <string value="Category"></string>
                 <int value="0"></int>
                 <int value="1"></int>
                </list>
               </tuple>
               <tuple>
                <string value="css-class"></string>
                <list>
                 <string value="CSS class"></string>
                 <int value="0"></int>
                 <int value="2"></int>
                </list>
               </tuple>
               <tuple>
                <string value="icon"></string>
                <list>
                 <string value="Icon"></string>
                 <int value="0"></int>
                 <int value="3"></int>
                </list>
               </tuple>
              </list>
              <string role="key" value="_author"></string>
              <string value=""></string>
              <string role="key" value="_iDeviceDir"></string>
              <string value="udl-content"></string>
              <string role="key" value="_purpose"></string>
              <string value=""></string>
              <string role="key" value="_tip"></string>
              <string value=""></string>
              <string role="key" value="_valid"></string>
              <bool value="1"></bool>
              <string role="key" value="class_"></string>
              <unicode value="UDLcontent"></unicode>
              <string role="key" value="edit"></string>
              <bool value="0"></bool>
              <string role="key" value="emphasis"></string>
              <int value="1"></int>
              <string role="key" value="exe.engine.jsidevice.JsIdevice.persistenceVersion"></string>
              <int value="1"></int>
              <string role="key" value="fields"></string>
              <list>
               <instance class="exe.engine.field.TextAreaField" reference="48">
                <dictionary>
                 <string role="key" value="_id"></string>
                 <unicode value="869_2"></unicode>
                 <string role="key" value="_idevice"></string>
                 <reference key="47"></reference>
                 <string role="key" value="_instruc"></string>
                 <string value=""></string>
                 <string role="key" value="_name"></string>
                 <string value=""></string>
                 <string role="key" value="anchor_names"></string>
                 <list></list>
                 <string role="key" value="content_w_resourcePaths"></string>
                 <unicode content="true" value="&lt;div class=&quot;exe-udlContent exe-udlContent-engagement&quot;&gt;&lt;section class=&quot;exe-udlContent-block&quot;&gt;&lt;div class=&quot;exe-udlContent-content&quot;&gt;&lt;div class=&quot;exe-udlContent-content-main&quot;&gt;&lt;p&gt;Vamos a configurar el botón de añadir tareas, que lo que hará será crear un objeto &lt;strong&gt;Task&lt;/strong&gt;, almacenarlo en base de datos y luego añadirlo a la lista que tiene el adapter. Lo primero que haremos será ir a nuestro DAO y añadir una nueva función de insertar.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Insert
fun addTask(taskEntity : TaskEntity):Long&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Simplemente recibirá un objeto &lt;strong&gt;TaskEntity&lt;/strong&gt; y lo añadirá a la base de datos. Fijaros que devuelve un &lt;strong&gt;Long&lt;/strong&gt;, eso es porque nos dará automáticamente la&amp;nbsp;&lt;strong&gt;ID&amp;nbsp;&lt;/strong&gt;del item añadido.&lt;/p&gt;
&lt;p&gt;Nos vamos a nuestro&amp;nbsp;&lt;strong&gt;onCreate&amp;nbsp;&lt;/strong&gt;del &lt;strong&gt;MainAcitivity&lt;/strong&gt; y añadimos lo siguiente.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;btnAddTask.setOnClickListener {
addTask(TaskEntity(name = etTask.text.toString()))}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Simplemente le hemos asignado al evento del click un método llamado&amp;nbsp;&lt;strong&gt;addTask()&lt;/strong&gt;&amp;nbsp;al cual le pasamos un objeto nuevo con el texto de la celda. Dicha función añadirá a la base de datos la tarea, luego recuperemos dicha tarea y la añadiremos a la lista del &lt;strong&gt;adapter&lt;/strong&gt;. &lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;  fun addTask(task:TaskEntity)= runBlocking{
        launch {
            val id = MisNotasApp.database.taskDao().addTask(task)
            val recoveryTask = MisNotasApp.database.taskDao().getTaskById(id)
                tasks.add(recoveryTask)
                adapter.notifyItemInserted(tasks.size)
                clearFocus()
                hideKeyboard()
        }
    }&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Así que lo que estamos haciendo es añadir la tarea y luego recuperamos dicho objeto a través de &lt;strong&gt;getTaskById&lt;/strong&gt; pasándole la &lt;strong&gt;ID&lt;/strong&gt; que nos devuelve &lt;strong&gt;addTask&lt;/strong&gt;. Obviamente debemos añadir a nuestro DAO la función de recuperar el item.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;@Query(&quot;SELECT * FROM task_entity where id like :arg0&quot;)
fun getTaskById(id: Long): TaskEntity&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Cuando hemos acabado de realizar esto, en el hilo principal añadimos el objeto recuperado a la lista, le decimos al adapter que hemos añadido un objeto nuevo a través de&amp;nbsp;&lt;strong&gt;adapter.notifyItemInserted&lt;/strong&gt; (hay que pasarle pa posición, como es el último objeto añadido, podemos saber cual es recuperando el tamaño de la lista) y luego los métodos&amp;nbsp;&lt;strong&gt;clearFocus()&amp;nbsp;&lt;/strong&gt;y&amp;nbsp;&lt;strong&gt;hideKeyboard()&amp;nbsp;&lt;/strong&gt;simplemente nos quitarán el texto del &lt;strong&gt;editText&lt;/strong&gt; y bajarán el teclado.&lt;/p&gt;
&lt;div class=&quot;highlighted-code language-java&quot;&gt;
&lt;div&gt;
&lt;pre&gt;&lt;code&gt;fun clearFocus(){
   etTask.setText(&quot;&quot;)
}
fun Context.hideKeyboard() {
    val inputMethodManager = getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager
    inputMethodManager.hideSoftInputFromWindow(currentFocus.windowToken, 0)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;"></unicode>
                 <string role="key" value="exe.engine.field.Field.persistenceVersion"></string>
                 <int value="4"></int>
                 <string role="key" value="exe.engine.field.FieldWithResources.persistenceVersion"></string>
                 <int value="2"></int>
                 <string role="key" value="exe.engine.field.TextAreaField.persistenceVersion"></string>
                 <int value="3"></int>
                 <string role="key" value="htmlTag"></string>
                 <string value="div"></string>
                 <string role="key" value="images"></string>
                 <instance class="exe.engine.galleryidevice.GalleryImages">
                  <dictionary>
                   <string role="key" value=".listitems"></string>
                   <list></list>
                   <string role="key" value="idevice"></string>
                   <reference key="48"></reference>
                  </dictionary>
                 </instance>
                 <string role="key" value="intlinks_to_anchors"></string>
                 <dictionary></dictionary>
                 <string role="key" value="nextImageId"></string>
                 <int value="0"></int>
                 <string role="key" value="parentNode"></string>
                 <none></none>
                </dictionary>
               </instance>
              </list>
              <string role="key" value="icon"></string>
              <unicode value=""></unicode>
              <string role="key" value="id"></string>
              <unicode value="22"></unicode>
              <string role="key" value="ideviceCategory"></string>
              <unicode value="Text and Tasks"></unicode>
              <string role="key" value="lastIdevice"></string>
              <bool value="0"></bool>
              <string role="key" value="nextFieldId"></string>
              <int value="3"></int>
              <string role="key" value="originalicon"></string>
              <string value=""></string>
              <string role="key" value="parentNode"></string>
              <reference key="43"></reference>
              <string role="key" value="systemResources"></string>
              <list></list>
              <string role="key" value="undo"></string>
              <bool value="1"></bool>
              <string role="key" value="userResources"></string>
              <list></list>
              <string role="key" value="version"></string>
              <int value="0"></int>
             </dictionary>
            </instance>
           </list>
           <string role="key" value="_id"></string>
           <unicode value="9"></unicode>
           <string role="key" value="_package"></string>
           <reference key="1"></reference>
           <string role="key" value="anchor_fields"></string>
           <list></list>
           <string role="key" value="exe.engine.node.Node.persistenceVersion"></string>
           <int value="2"></int>
           <string role="key" value="exportType"></string>
           <string value="website"></string>
           <string role="key" value="last_full_node_path"></string>
           <string value="exe-node:UA04.%20Comunicando...:4.4.%20Permanencia:4.4.4.%20Room"></string>
           <string role="key" value="parent"></string>
           <reference key="27"></reference>
           <string role="key" value="top_anchors_linked_from_fields"></string>
           <list></list>
           <string role="key" value="children"></string>
           <list></list>
          </dictionary>
         </instance>
        </list>
       </dictionary>
      </instance>
     </list>
    </dictionary>
   </instance>
   <unicode role="key" value="1"></unicode>
   <reference key="4"></reference>
   <unicode role="key" value="2"></unicode>
   <reference key="12"></reference>
   <unicode role="key" value="3"></unicode>
   <reference key="21"></reference>
   <unicode role="key" value="4"></unicode>
   <reference key="27"></reference>
   <unicode role="key" value="5"></unicode>
   <reference key="30"></reference>
   <unicode role="key" value="6"></unicode>
   <reference key="33"></reference>
   <unicode role="key" value="7"></unicode>
   <reference key="38"></reference>
   <unicode role="key" value="9"></unicode>
   <reference key="43"></reference>
  </dictionary>
  <string role="key" value="_objectives"></string>
  <unicode value=""></unicode>
  <string role="key" value="_preknowledge"></string>
  <unicode value=""></unicode>
  <string role="key" value="_templateFile"></string>
  <string value="Base"></string>
  <string role="key" value="backgroundImgTile"></string>
  <bool value="0"></bool>
  <string role="key" value="currentNode"></string>
  <reference key="43"></reference>
  <string role="key" value="dublinCore"></string>
  <instance class="exe.engine.package.DublinCore">
   <dictionary>
    <string role="key" value="contributors"></string>
    <unicode value=""></unicode>
    <string role="key" value="coverage"></string>
    <unicode value=""></unicode>
    <string role="key" value="creator"></string>
    <unicode value="David Bermúdez"></unicode>
    <string role="key" value="date"></string>
    <unicode value=""></unicode>
    <string role="key" value="description"></string>
    <unicode value="Programación Multimedia de Dispositivos Móviles"></unicode>
    <string role="key" value="format"></string>
    <unicode value=""></unicode>
    <string role="key" value="identifier"></string>
    <unicode value="4a7d755e-34a5-410a-a7d4-601881136623"></unicode>
    <string role="key" value="language"></string>
    <unicode value="es"></unicode>
    <string role="key" value="publisher"></string>
    <unicode value=""></unicode>
    <string role="key" value="relation"></string>
    <unicode value=""></unicode>
    <string role="key" value="rights"></string>
    <unicode value=""></unicode>
    <string role="key" value="source"></string>
    <unicode value=""></unicode>
    <string role="key" value="subject"></string>
    <unicode value=""></unicode>
    <string role="key" value="title"></string>
    <unicode value="UA04. Comunicando..."></unicode>
    <string role="key" value="type"></string>
    <unicode value=""></unicode>
   </dictionary>
  </instance>
  <string role="key" value="exe.engine.package.Package.persistenceVersion"></string>
  <int value="16"></int>
  <string role="key" value="exportMetadataType"></string>
  <string value="LOMES"></string>
  <string role="key" value="exportSource"></string>
  <bool value="1"></bool>
  <string role="key" value="footer"></string>
  <string value=""></string>
  <string role="key" value="isLoading"></string>
  <bool value="0"></bool>
  <string role="key" value="license"></string>
  <unicode value="creative commons: attribution - non commercial - share alike 4.0"></unicode>
  <string role="key" value="lom"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="es"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.descriptionSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="string"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.LangStringSub">
           <dictionary>
            <string role="key" value="language"></string>
            <string value="es"></string>
            <string role="key" value="valueOf_"></string>
            <string value="Programaci\xc3\xb3n Multimedia de Dispositivos M\xc3\xb3viles"></string>
           </dictionary>
          </instance>
         </list>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="My Catalog"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="4a7d755e-34a5-410a-a7d4-601881136623"></unicode>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="es"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="es"></string>
           <string role="key" value="valueOf_"></string>
           <string value="UA04. Comunicando..."></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2022-10-31T01:03:24.00+01:00"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="es"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Fecha de creaci\xc3\xb3n de los metadatos"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:David Berm\xc3\xbadez EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2022-10-25T17:32:53.00+02:00"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="es"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Fecha de creaci\xc3\xb3n de los metadatos"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:David Berm\xc3\xbadez EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOMv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="es"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOMv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <none></none>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOMv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="yes"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="lomEs"></string>
  <instance class="exe.engine.lom.lomsubs.lomSub">
   <dictionary>
    <string role="key" value="__index__"></string>
    <dictionary></dictionary>
    <string role="key" value="__oldchild__"></string>
    <none></none>
    <string role="key" value="annotation"></string>
    <list></list>
    <string role="key" value="classification"></string>
    <list></list>
    <string role="key" value="educational"></string>
    <list>
     <instance class="exe.engine.lom.lomsubs.educationalSub">
      <dictionary>
       <string role="key" value="cognitiveProcess"></string>
       <list></list>
       <string role="key" value="context"></string>
       <list></list>
       <string role="key" value="description"></string>
       <list></list>
       <string role="key" value="difficulty"></string>
       <none></none>
       <string role="key" value="intendedEndUserRole"></string>
       <list></list>
       <string role="key" value="interactivityLevel"></string>
       <none></none>
       <string role="key" value="interactivityType"></string>
       <none></none>
       <string role="key" value="language"></string>
       <list>
        <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="es"></string>
         </dictionary>
        </instance>
       </list>
       <string role="key" value="learningResourceType"></string>
       <list></list>
       <string role="key" value="semanticDensity"></string>
       <none></none>
       <string role="key" value="typicalAgeRange"></string>
       <list></list>
       <string role="key" value="typicalLearningTime"></string>
       <none></none>
      </dictionary>
     </instance>
    </list>
    <string role="key" value="general"></string>
    <instance class="exe.engine.lom.lomsubs.generalSub">
     <dictionary>
      <string role="key" value="aggregationLevel"></string>
      <instance class="exe.engine.lom.lomsubs.aggregationLevelSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="aggregationLevel"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.aggregationLevelValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="2"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="coverage"></string>
      <list></list>
      <string role="key" value="description"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.descriptionSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="string"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.LangStringSub">
           <dictionary>
            <string role="key" value="language"></string>
            <string value="es"></string>
            <string role="key" value="valueOf_"></string>
            <string value="Programaci\xc3\xb3n Multimedia de Dispositivos M\xc3\xb3viles"></string>
           </dictionary>
          </instance>
         </list>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.identifierSub">
        <dictionary>
         <string role="key" value="catalog"></string>
         <instance class="exe.engine.lom.lomsubs.catalogSub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="catalog"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="My Catalog"></unicode>
          </dictionary>
         </instance>
         <string role="key" value="entry"></string>
         <instance class="exe.engine.lom.lomsubs.entrySub">
          <dictionary>
           <string role="key" value="uniqueElementName"></string>
           <string value="entry"></string>
           <string role="key" value="valueOf_"></string>
           <unicode value="4a7d755e-34a5-410a-a7d4-601881136623"></unicode>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="keyword"></string>
      <list></list>
      <string role="key" value="language"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
        <dictionary>
         <string role="key" value="extensiontype_"></string>
         <none></none>
         <string role="key" value="valueOf_"></string>
         <string value="es"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="structure"></string>
      <none></none>
      <string role="key" value="title"></string>
      <instance class="exe.engine.lom.lomsubs.titleSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="string"></string>
        <list>
         <instance class="exe.engine.lom.lomsubs.LangStringSub">
          <dictionary>
           <string role="key" value="language"></string>
           <string value="es"></string>
           <string role="key" value="valueOf_"></string>
           <string value="UA04. Comunicando..."></string>
          </dictionary>
         </instance>
        </list>
        <string role="key" value="uniqueElementName"></string>
        <none></none>
       </dictionary>
      </instance>
      <string role="key" value="uniqueElementName"></string>
      <string value="general"></string>
     </dictionary>
    </instance>
    <string role="key" value="lifeCycle"></string>
    <instance class="exe.engine.lom.lomsubs.lifeCycleSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2022-10-31T01:03:24.00+01:00"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="es"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Fecha de creaci\xc3\xb3n de los metadatos"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:David Berm\xc3\xbadez EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="author"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="status"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <none></none>
      <string role="key" value="version"></string>
      <none></none>
     </dictionary>
    </instance>
    <string role="key" value="metaMetadata"></string>
    <instance class="exe.engine.lom.lomsubs.metaMetadataSub">
     <dictionary>
      <string role="key" value="contribute"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.contributeMetaSub">
        <dictionary>
         <string role="key" value="date"></string>
         <instance class="exe.engine.lom.lomsubs.dateSub">
          <dictionary>
           <string role="key" value="dateTime"></string>
           <instance class="exe.engine.lom.lomsubs.DateTimeValueSub">
            <dictionary>
             <string role="key" value="uniqueElementName"></string>
             <string value="dateTime"></string>
             <string role="key" value="valueOf_"></string>
             <string value="2022-10-25T17:32:53.00+02:00"></string>
            </dictionary>
           </instance>
           <string role="key" value="description"></string>
           <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list>
              <instance class="exe.engine.lom.lomsubs.LangStringSub">
               <dictionary>
                <string role="key" value="language"></string>
                <string value="es"></string>
                <string role="key" value="valueOf_"></string>
                <string value="Fecha de creaci\xc3\xb3n de los metadatos"></string>
               </dictionary>
              </instance>
             </list>
            </dictionary>
           </instance>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="uniqueElementName"></string>
           <none></none>
           <string role="key" value="valueOf_"></string>
           <none></none>
          </dictionary>
         </instance>
         <string role="key" value="entity"></string>
         <list>
          <instance class="exe.engine.lom.lomsubs.entitySub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="BEGIN:VCARD VERSION:3.0 FN:David Berm\xc3\xbadez EMAIL;TYPE=INTERNET: ORG: END:VCARD"></string>
           </dictionary>
          </instance>
         </list>
         <string role="key" value="role"></string>
         <instance class="exe.engine.lom.lomsubs.roleSub">
          <dictionary>
           <string role="key" value="extensiontype_"></string>
           <none></none>
           <string role="key" value="source"></string>
           <instance class="exe.engine.lom.lomsubs.sourceValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="string"></string>
             <list></list>
             <string role="key" value="uniqueElementName"></string>
             <string value="source"></string>
             <string role="key" value="valueOf_"></string>
             <string value="LOM-ESv1.0"></string>
            </dictionary>
           </instance>
           <string role="key" value="uniqueElementName"></string>
           <string value="role"></string>
           <string role="key" value="value"></string>
           <instance class="exe.engine.lom.lomsubs.roleValueSub">
            <dictionary>
             <string role="key" value="extensiontype_"></string>
             <none></none>
             <string role="key" value="source"></string>
             <none></none>
             <string role="key" value="uniqueElementName"></string>
             <string value="value"></string>
             <string role="key" value="value"></string>
             <none></none>
             <string role="key" value="valueOf_"></string>
             <string value="creator"></string>
            </dictionary>
           </instance>
          </dictionary>
         </instance>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="identifier"></string>
      <list></list>
      <string role="key" value="language"></string>
      <instance class="exe.engine.lom.lomsubs.LanguageIdSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="valueOf_"></string>
        <string value="es"></string>
       </dictionary>
      </instance>
      <string role="key" value="metadataSchema"></string>
      <list>
       <instance class="exe.engine.lom.lomsubs.metadataSchemaSub">
        <dictionary>
         <string role="key" value="valueOf_"></string>
         <string value="LOM-ESv1.0"></string>
        </dictionary>
       </instance>
      </list>
      <string role="key" value="uniqueElementName"></string>
      <string value="metaMetadata"></string>
     </dictionary>
    </instance>
    <string role="key" value="relation"></string>
    <list></list>
    <string role="key" value="rights"></string>
    <instance class="exe.engine.lom.lomsubs.rightsSub">
     <dictionary>
      <string role="key" value="access"></string>
      <instance class="exe.engine.lom.lomsubs.accessSub">
       <dictionary>
        <string role="key" value="accessType"></string>
        <instance class="exe.engine.lom.lomsubs.accessTypeSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <instance class="exe.engine.lom.lomsubs.sourceValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="string"></string>
            <list></list>
            <string role="key" value="uniqueElementName"></string>
            <string value="source"></string>
            <string role="key" value="valueOf_"></string>
            <string value="LOM-ESv1.0"></string>
           </dictionary>
          </instance>
          <string role="key" value="uniqueElementName"></string>
          <string value="accessType"></string>
          <string role="key" value="value"></string>
          <instance class="exe.engine.lom.lomsubs.accessTypeValueSub">
           <dictionary>
            <string role="key" value="extensiontype_"></string>
            <none></none>
            <string role="key" value="source"></string>
            <none></none>
            <string role="key" value="uniqueElementName"></string>
            <string value="value"></string>
            <string role="key" value="value"></string>
            <none></none>
            <string role="key" value="valueOf_"></string>
            <string value="universal"></string>
           </dictionary>
          </instance>
         </dictionary>
        </instance>
        <string role="key" value="description"></string>
        <instance class="exe.engine.lom.lomsubs.LanguageStringSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list>
           <instance class="exe.engine.lom.lomsubs.LangStringSub">
            <dictionary>
             <string role="key" value="language"></string>
             <string value="en"></string>
             <string role="key" value="valueOf_"></string>
             <unicode value="Default"></unicode>
            </dictionary>
           </instance>
          </list>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="access"></string>
       </dictionary>
      </instance>
      <string role="key" value="copyrightAndOtherRestrictions"></string>
      <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsSub">
       <dictionary>
        <string role="key" value="extensiontype_"></string>
        <none></none>
        <string role="key" value="source"></string>
        <instance class="exe.engine.lom.lomsubs.sourceValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="string"></string>
          <list></list>
          <string role="key" value="uniqueElementName"></string>
          <string value="source"></string>
          <string role="key" value="valueOf_"></string>
          <string value="LOM-ESv1.0"></string>
         </dictionary>
        </instance>
        <string role="key" value="uniqueElementName"></string>
        <string value="copyrightAndOtherRestrictions"></string>
        <string role="key" value="value"></string>
        <instance class="exe.engine.lom.lomsubs.copyrightAndOtherRestrictionsValueSub">
         <dictionary>
          <string role="key" value="extensiontype_"></string>
          <none></none>
          <string role="key" value="source"></string>
          <none></none>
          <string role="key" value="uniqueElementName"></string>
          <string value="value"></string>
          <string role="key" value="value"></string>
          <none></none>
          <string role="key" value="valueOf_"></string>
          <string value="creative commons: attribution - non commercial - share alike"></string>
         </dictionary>
        </instance>
       </dictionary>
      </instance>
      <string role="key" value="cost"></string>
      <none></none>
      <string role="key" value="description"></string>
      <none></none>
      <string role="key" value="uniqueElementName"></string>
      <string value="rights"></string>
     </dictionary>
    </instance>
    <string role="key" value="technical"></string>
    <none></none>
   </dictionary>
  </instance>
  <string role="key" value="mxmlforcemediaonly"></string>
  <bool value="0"></bool>
  <string role="key" value="mxmlheight"></string>
  <string value=""></string>
  <string role="key" value="mxmlprofilelist"></string>
  <string value=""></string>
  <string role="key" value="mxmlwidth"></string>
  <string value=""></string>
  <string role="key" value="release"></string>
  <string value="2.7"></string>
  <string role="key" value="resources"></string>
  <dictionary>
   <string role="key" value="02985fe3f4d8bdc899a006c9f0c6317b"></string>
   <list>
    <reference key="17"></reference>
   </list>
   <string role="key" value="0b3a7fa642ffc3d40563a8f8ac4b18cb"></string>
   <list>
    <reference key="18"></reference>
   </list>
   <string role="key" value="9cf2e9f17b01edee76f5ff365e075dc8"></string>
   <list>
    <reference key="44"></reference>
   </list>
   <string role="key" value="ae3579d59141272f624c1e722af90af2"></string>
   <list>
    <reference key="22"></reference>
   </list>
  </dictionary>
  <string role="key" value="root"></string>
  <reference key="9"></reference>
  <string role="key" value="scolinks"></string>
  <bool value="0"></bool>
  <string role="key" value="scowsinglepage"></string>
  <bool value="0"></bool>
  <string role="key" value="scowwebsite"></string>
  <bool value="0"></bool>
  <string role="key" value="style"></string>
  <unicode value="nervion"></unicode>
  <string role="key" value="sugaractivityname"></string>
  <string value=""></string>
  <string role="key" value="sugarservicename"></string>
  <string value=""></string>
  <string role="key" value="tempFile"></string>
  <bool value="0"></bool>
 </dictionary>
</instance>